
> bookstock@0.1.0 test
> vitest

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

 DEV  v2.1.9 /Users/michaelblom/dev/stockly2

 âœ“ src/test/services/titleService.test.ts (32 tests) 15ms
stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","address_line1","city","country","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7,$8,$9,$10) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","address_line1","city","country","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7,$8,$9,$10) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query INSERT INTO "public"."titles" ("isbn","title","author","format","rrp","unit_cost","low_stock_threshold","created_at","updated_at") VALUES ($1,$2,$3,CAST($4::text AS "public"."Format"),$5,$6,$7,$8,$9) RETURNING "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query INSERT INTO "public"."titles" ("isbn","title","author","format","rrp","unit_cost","low_stock_threshold","created_at","updated_at") VALUES ($1,$2,$3,CAST($4::text AS "public"."Format"),$5,$6,$7,$8,$9) RETURNING "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at"

 âœ“ src/test/lib/validators/title.test.ts (79 tests) 60ms
stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query INSERT INTO "public"."titles" ("isbn","title","author","format","rrp","unit_cost","low_stock_threshold","created_at","updated_at") VALUES ($1,$2,$3,CAST($4::text AS "public"."Format"),$5,$6,$7,$8,$9) RETURNING "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should return inventory grouped by warehouse with title details
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should return inventory grouped by warehouse with title details
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should return inventory grouped by warehouse with title details
prisma:query BEGIN

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should return inventory grouped by warehouse with title details
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should return inventory grouped by warehouse with title details
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" LEFT JOIN "public"."warehouses" AS "orderby_1" ON ("orderby_1"."id") = ("public"."inventory"."warehouse_id") LEFT JOIN "public"."titles" AS "orderby_2" ON ("orderby_2"."id") = ("public"."inventory"."title_id") WHERE 1=1 ORDER BY "orderby_1"."name" ASC, "orderby_2"."title" ASC OFFSET $1

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should return inventory grouped by warehouse with title details
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1,$2,$3,$4,$5) OFFSET $6

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should filter inventory by warehouse
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should filter inventory by warehouse
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should filter inventory by warehouse
prisma:query BEGIN

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should filter inventory by warehouse
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18)
prisma:query COMMIT
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE "public"."inventory"."warehouse_id" = $1 OFFSET $2
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1) OFFSET $2

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should include low stock indicators
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should include low stock indicators
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should include low stock indicators
prisma:query BEGIN

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should include low stock indicators
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should include low stock indicators
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE 1=1 OFFSET $1
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1,$2,$3,$4,$5) OFFSET $6

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/dashboard > should calculate total stock across warehouses
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18)
prisma:query COMMIT
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE "public"."inventory"."title_id" = $1 OFFSET $2

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should return only items below threshold
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query BEGIN

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should return only items below threshold
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18), ($19,$20,$21,$22,$23,$24)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should return only items below threshold
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should return only items below threshold
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" LEFT JOIN "public"."titles" AS "j0" ON ("j0"."id") = ("public"."inventory"."title_id") WHERE ("j0"."low_stock_threshold" IS NOT NULL AND ("j0"."id" IS NOT NULL)) OFFSET $1
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1,$2) OFFSET $3

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should include warehouse breakdown for low stock items
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should include warehouse breakdown for low stock items
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should include warehouse breakdown for low stock items
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18), ($19,$20,$21,$22,$23,$24)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should include warehouse breakdown for low stock items
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should include warehouse breakdown for low stock items
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE "public"."inventory"."title_id" = $1 OFFSET $2
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1) OFFSET $2
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1,$2) OFFSET $3

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should filter low stock items by warehouse
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should filter low stock items by warehouse
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should filter low stock items by warehouse
prisma:query BEGIN

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should filter low stock items by warehouse
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18), ($19,$20,$21,$22,$23,$24)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should filter low stock items by warehouse
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should filter low stock items by warehouse
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" LEFT JOIN "public"."titles" AS "j0" ON ("j0"."id") = ("public"."inventory"."title_id") WHERE ("public"."inventory"."warehouse_id" = $1 AND ("j0"."low_stock_threshold" IS NOT NULL AND ("j0"."id" IS NOT NULL))) OFFSET $2

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should filter low stock items by warehouse
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1) OFFSET $2

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should exclude items without threshold
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should exclude items without threshold
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12), ($13,$14,$15,$16,$17,$18), ($19,$20,$21,$22,$23,$24)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/inventory/low-stock > should exclude items without threshold
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" LEFT JOIN "public"."titles" AS "j0" ON ("j0"."id") = ("public"."inventory"."title_id") WHERE ("j0"."low_stock_threshold" IS NOT NULL AND ("j0"."id" IS NOT NULL)) OFFSET $1
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2) OFFSET $3

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create PRINT_RECEIVED movement and increase stock
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create PRINT_RECEIVED movement and increase stock
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create PRINT_RECEIVED movement and increase stock
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","rrp_at_time","unit_cost_at_time","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,$7,$8,$9,$10,$11) RETURNING "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create PRINT_RECEIVED movement and increase stock
prisma:query UPDATE "public"."inventory" SET "current_stock" = ("public"."inventory"."current_stock" + $1), "last_movement_date" = $2, "updated_at" = $3 WHERE (("public"."inventory"."title_id" = $4 AND "public"."inventory"."warehouse_id" = $5) AND 1=1) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create PRINT_RECEIVED movement and increase stock
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE (("public"."inventory"."title_id" = $1 AND "public"."inventory"."warehouse_id" = $2) AND 1=1) LIMIT $3 OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create ONLINE_SALES movement and decrease stock
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create ONLINE_SALES movement and decrease stock
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create ONLINE_SALES movement and decrease stock
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create ONLINE_SALES movement and decrease stock
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","rrp_at_time","reference_number","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,$7,$8,$9) RETURNING "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create ONLINE_SALES movement and decrease stock
prisma:query UPDATE "public"."inventory" SET "current_stock" = ("public"."inventory"."current_stock" - $1), "last_movement_date" = $2, "updated_at" = $3 WHERE (("public"."inventory"."title_id" = $4 AND "public"."inventory"."warehouse_id" = $5) AND 1=1) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE (("public"."inventory"."title_id" = $1 AND "public"."inventory"."warehouse_id" = $2) AND 1=1) LIMIT $3 OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create WAREHOUSE_TRANSFER movement
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create WAREHOUSE_TRANSFER movement
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create WAREHOUSE_TRANSFER movement
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create WAREHOUSE_TRANSFER movement
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","source_warehouse_id","destination_warehouse_id","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,$7,$8,$9,$10,$11) RETURNING "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create WAREHOUSE_TRANSFER movement
prisma:query BEGIN
prisma:query UPDATE "public"."inventory" SET "current_stock" = ("public"."inventory"."current_stock" - $1), "last_movement_date" = $2, "updated_at" = $3 WHERE (("public"."inventory"."title_id" = $4 AND "public"."inventory"."warehouse_id" = $5) AND 1=1) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"
prisma:query UPDATE "public"."inventory" SET "current_stock" = ("public"."inventory"."current_stock" + $1), "last_movement_date" = $2, "updated_at" = $3 WHERE (("public"."inventory"."title_id" = $4 AND "public"."inventory"."warehouse_id" = $5) AND 1=1) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"
prisma:query COMMIT
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE (("public"."inventory"."title_id" = $1 AND "public"."inventory"."warehouse_id" = $2) AND 1=1) LIMIT $3 OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create WAREHOUSE_TRANSFER movement
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE (("public"."inventory"."title_id" = $1 AND "public"."inventory"."warehouse_id" = $2) AND 1=1) LIMIT $3 OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create STOCK_ADJUSTMENT movement with notes
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create STOCK_ADJUSTMENT movement with notes
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,$7,$8) RETURNING "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should create STOCK_ADJUSTMENT movement with notes
prisma:query UPDATE "public"."inventory" SET "current_stock" = ("public"."inventory"."current_stock" + $1), "last_stock_check" = $2, "last_movement_date" = $3, "updated_at" = $4 WHERE (("public"."inventory"."title_id" = $5 AND "public"."inventory"."warehouse_id" = $6) AND 1=1) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE (("public"."inventory"."title_id" = $1 AND "public"."inventory"."warehouse_id" = $2) AND 1=1) LIMIT $3 OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should track createdBy for audit trail
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should track createdBy for audit trail
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should track createdBy for audit trail
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,$7,$8) RETURNING "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should prevent negative stock for non-adjustment movements
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should prevent negative stock for non-adjustment movements
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should prevent negative stock for non-adjustment movements
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6) RETURNING "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should prevent negative stock for non-adjustment movements
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE (("public"."inventory"."title_id" = $1 AND "public"."inventory"."warehouse_id" = $2) AND 1=1) LIMIT $3 OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > POST /api/stock-movements > should prevent negative stock for non-adjustment movements
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,$7) RETURNING "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should return paginated movement history
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query BEGIN

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should return paginated movement history
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12)
prisma:query COMMIT
prisma:query BEGIN
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,null,$7,$8), ($9,$10,CAST($11::text AS "public"."MovementType"),$12,$13,$14,null,$15,$16), ($17,$18,CAST($19::text AS "public"."MovementType"),$20,$21,$22,null,$23,$24), ($25,$26,CAST($27::text AS "public"."MovementType"),$28,$29,null,$30,$31,$32)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should return paginated movement history
prisma:query SELECT "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at" FROM "public"."stock_movements" WHERE 1=1 ORDER BY "public"."stock_movements"."movement_date" DESC LIMIT $1 OFFSET $2
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1,$2,$3,$4) OFFSET $5

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by titleId
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by titleId
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by titleId
prisma:query BEGIN

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by titleId
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12)
prisma:query COMMIT
prisma:query BEGIN
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,null,$7,$8), ($9,$10,CAST($11::text AS "public"."MovementType"),$12,$13,$14,null,$15,$16), ($17,$18,CAST($19::text AS "public"."MovementType"),$20,$21,$22,null,$23,$24), ($25,$26,CAST($27::text AS "public"."MovementType"),$28,$29,null,$30,$31,$32)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by titleId
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by titleId
prisma:query SELECT "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at" FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" = $1 ORDER BY "public"."stock_movements"."movement_date" DESC OFFSET $2

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by warehouseId
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by warehouseId
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by warehouseId
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by warehouseId
prisma:query BEGIN
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,null,$7,$8), ($9,$10,CAST($11::text AS "public"."MovementType"),$12,$13,$14,null,$15,$16), ($17,$18,CAST($19::text AS "public"."MovementType"),$20,$21,$22,null,$23,$24), ($25,$26,CAST($27::text AS "public"."MovementType"),$28,$29,null,$30,$31,$32)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by warehouseId
prisma:query SELECT "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at" FROM "public"."stock_movements" WHERE "public"."stock_movements"."warehouse_id" = $1 OFFSET $2

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by movementType
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by movementType
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by movementType
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12)
prisma:query COMMIT
prisma:query BEGIN
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,null,$7,$8), ($9,$10,CAST($11::text AS "public"."MovementType"),$12,$13,$14,null,$15,$16), ($17,$18,CAST($19::text AS "public"."MovementType"),$20,$21,$22,null,$23,$24), ($25,$26,CAST($27::text AS "public"."MovementType"),$28,$29,null,$30,$31,$32)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by movementType
prisma:query SELECT "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at" FROM "public"."stock_movements" WHERE ("public"."stock_movements"."movement_type" = CAST($1::text AS "public"."MovementType") AND "public"."stock_movements"."title_id" IN ($2,$3)) OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by date range
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by date range
prisma:query BEGIN
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,null,$7,$8), ($9,$10,CAST($11::text AS "public"."MovementType"),$12,$13,$14,null,$15,$16), ($17,$18,CAST($19::text AS "public"."MovementType"),$20,$21,$22,null,$23,$24), ($25,$26,CAST($27::text AS "public"."MovementType"),$28,$29,null,$30,$31,$32)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should filter movements by date range
prisma:query SELECT "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at" FROM "public"."stock_movements" WHERE ("public"."stock_movements"."movement_date" >= $1 AND "public"."stock_movements"."movement_date" <= $2) ORDER BY "public"."stock_movements"."movement_date" ASC OFFSET $3

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should combine multiple filters
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should combine multiple filters
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should combine multiple filters
prisma:query BEGIN
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,null,$7,$8), ($9,$10,CAST($11::text AS "public"."MovementType"),$12,$13,$14,null,$15,$16), ($17,$18,CAST($19::text AS "public"."MovementType"),$20,$21,$22,null,$23,$24), ($25,$26,CAST($27::text AS "public"."MovementType"),$28,$29,null,$30,$31,$32)
prisma:query COMMIT

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should combine multiple filters
prisma:query SELECT "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at" FROM "public"."stock_movements" WHERE ("public"."stock_movements"."title_id" = $1 AND "public"."stock_movements"."warehouse_id" = $2 AND "public"."stock_movements"."movement_type" = CAST($3::text AS "public"."MovementType")) OFFSET $4

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should order movements by date descending
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should order movements by date descending
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > GET /api/stock-movements > should order movements by date descending
prisma:query BEGIN
prisma:query INSERT INTO "public"."inventory" ("title_id","warehouse_id","current_stock","reserved_stock","created_at","updated_at") VALUES ($1,$2,$3,$4,$5,$6), ($7,$8,$9,$10,$11,$12)
prisma:query COMMIT
prisma:query BEGIN
prisma:query INSERT INTO "public"."stock_movements" ("title_id","warehouse_id","movement_type","quantity","movement_date","reference_number","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."MovementType"),$4,$5,$6,null,$7,$8), ($9,$10,CAST($11::text AS "public"."MovementType"),$12,$13,$14,null,$15,$16), ($17,$18,CAST($19::text AS "public"."MovementType"),$20,$21,$22,null,$23,$24), ($25,$26,CAST($27::text AS "public"."MovementType"),$28,$29,null,$30,$31,$32)
prisma:query COMMIT
prisma:query SELECT "public"."stock_movements"."id", "public"."stock_movements"."title_id", "public"."stock_movements"."warehouse_id", "public"."stock_movements"."movement_type"::text, "public"."stock_movements"."quantity", "public"."stock_movements"."movement_date", "public"."stock_movements"."rrp_at_time", "public"."stock_movements"."unit_cost_at_time", "public"."stock_movements"."trade_discount_at_time", "public"."stock_movements"."source_warehouse_id", "public"."stock_movements"."destination_warehouse_id", "public"."stock_movements"."printer_id", "public"."stock_movements"."reference_number", "public"."stock_movements"."notes", "public"."stock_movements"."created_by", "public"."stock_movements"."created_at", "public"."stock_movements"."updated_at" FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" = $1 ORDER BY "public"."stock_movements"."movement_date" DESC OFFSET $2

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should update low stock threshold
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should update low stock threshold
prisma:query UPDATE "public"."titles" SET "low_stock_threshold" = $1, "updated_at" = $2 WHERE ("public"."titles"."id" = $3 AND 1=1) RETURNING "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should allow setting threshold to null
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should allow setting threshold to null
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:query UPDATE "public"."titles" SET "low_stock_threshold" = $1, "updated_at" = $2 WHERE ("public"."titles"."id" = $3 AND 1=1) RETURNING "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should allow setting threshold to zero
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should allow setting threshold to zero
prisma:query UPDATE "public"."titles" SET "low_stock_threshold" = $1, "updated_at" = $2 WHERE ("public"."titles"."id" = $3 AND 1=1) RETURNING "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at"

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should reject negative threshold values
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should reject negative threshold values
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should handle non-existent title ID
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > PATCH /api/titles/:id/stock-threshold > should handle non-existent title ID
prisma:query UPDATE "public"."titles" SET "low_stock_threshold" = $1, "updated_at" = $2 WHERE ("public"."titles"."id" = $3 AND 1=1) RETURNING "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at"
prisma:error 
Invalid `prisma.title.update()` invocation:


An operation failed because it depends on one or more records that were required but not found. No record was found for an update.

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > Error Handling > should handle invalid movement type
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > Error Handling > should handle invalid movement type
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > Error Handling > should handle missing required fields
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)
prisma:error 
Invalid `prisma.stockMovement.create()` invocation:

{
  data: {
+   movementType: MovementType
  }
}

Argument `movementType` is missing.

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > Error Handling > should handle transfer without destination
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > Error Handling > should handle adjustment without notes
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests > Error Handling > should handle adjustment without notes
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query DELETE FROM "public"."stock_movements" WHERE "public"."stock_movements"."title_id" IN ($1,$2,$3)
prisma:query DELETE FROM "public"."inventory" WHERE "public"."inventory"."title_id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query DELETE FROM "public"."titles" WHERE "public"."titles"."id" IN ($1,$2,$3)

stdout | src/test/api/inventory.integration.test.ts > Inventory API Integration Tests
prisma:query DELETE FROM "public"."warehouses" WHERE "public"."warehouses"."id" IN ($1,$2)

 âœ“ src/test/api/inventory.integration.test.ts (30 tests) 355ms
 â¯ src/test/models/stock-movement.test.ts (20 tests | 3 failed) 585ms
   Ã— StockMovement Model > Creation > should create print received movement with printer name 36ms
     â†’ 
Invalid `prisma.stockMovement.create()` invocation:

{
  data: {
    titleId: 195,
    warehouseId: 343,
    movementType: "PRINT_RECEIVED",
    quantity: 4000,
    movementDate: new Date("2024-01-10T00:00:00.000Z"),
    printerName: "Lightning Source UK",
    ~~~~~~~~~~~
    referenceNumber: "PRINT-2024-0115",
?   id?: Int,
?   rrpAtTime?: Decimal | Null,
?   unitCostAtTime?: Decimal | Null,
?   tradeDiscountAtTime?: Decimal | Null,
?   sourceWarehouseId?: Int | Null,
?   destinationWarehouseId?: Int | Null,
?   printerId?: Int | Null,
?   notes?: String | Null,
?   createdBy?: String | Null,
?   createdAt?: DateTime,
?   updatedAt?: DateTime
  }
}

Unknown argument `printerName`. Available options are marked with ?.
   Ã— StockMovement Model > Relationships > should handle cascade deletion from title 16ms
     â†’ 
Invalid `prisma.title.delete()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
   Ã— StockMovement Model > Business Logic Scenarios > should support reprint workflow tracking 45ms
     â†’ 
Invalid `prisma.stockMovement.create()` invocation:

{
  data: {
    titleId: 212,
    warehouseId: 364,
    movementType: "PRINT_RECEIVED",
    quantity: 3000,
    movementDate: new Date("2024-01-01T00:00:00.000Z"),
    printerName: "Lightning Source UK",
    ~~~~~~~~~~~
    referenceNumber: "INITIAL-PRINT-001",
?   id?: Int,
?   rrpAtTime?: Decimal | Null,
?   unitCostAtTime?: Decimal | Null,
?   tradeDiscountAtTime?: Decimal | Null,
?   sourceWarehouseId?: Int | Null,
?   destinationWarehouseId?: Int | Null,
?   printerId?: Int | Null,
?   notes?: String | Null,
?   createdBy?: String | Null,
?   createdAt?: DateTime,
?   updatedAt?: DateTime
  }
}

Unknown argument `printerName`. Available options are marked with ?.
 â¯ src/test/security/authentication-bypass.test.ts (21 tests | 21 failed) 212ms
   Ã— Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with null/undefined user ID 44ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with empty string user ID 10ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with malformed user objects 6ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with SQL injection in user ID 6ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Role Manipulation Attempts > should reject requests attempting to inject admin role 7ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Role Manipulation Attempts > should validate role permissions from actual database state 7ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Role Manipulation Attempts > should prevent privilege escalation through role array manipulation 7ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Permission Bypass Attempts > should reject requests with missing permission checks 6ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Permission Bypass Attempts > should prevent wildcard permission exploitation 6ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Permission Bypass Attempts > should validate permission string format 6ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Session Manipulation Attempts > should reject expired or invalid sessions 6ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Session Manipulation Attempts > should reject requests with tampered session data 9ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Session Manipulation Attempts > should handle concurrent session validation correctly 10ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Injection Attacks > should prevent NoSQL injection in user lookups 10ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Injection Attacks > should sanitize special characters in user IDs 9ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Authorization Boundary Tests > should prevent horizontal privilege escalation 8ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Authorization Boundary Tests > should prevent vertical privilege escalation 8ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Edge Cases and Race Conditions > should handle rapid role changes safely 7ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > Edge Cases and Race Conditions > should handle database connection failures gracefully 7ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > skipAuth Security > should properly isolate public routes from auth requirements 12ms
     â†’ roleService.create is not a function
   Ã— Authentication Bypass Security Tests > skipAuth Security > should not allow skipAuth to bypass permission checks 10ms
     â†’ roleService.create is not a function
 â¯ src/test/security/vulnerability-scanning.test.ts (23 tests | 23 failed) 239ms
   Ã— Vulnerability Scanning Tests > XSS (Cross-Site Scripting) Prevention > should sanitize user input in database storage 45ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > XSS (Cross-Site Scripting) Prevention > should handle XSS in audit log details 7ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > XSS (Cross-Site Scripting) Prevention > should prevent stored XSS in user profile data 6ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > SQL Injection Prevention > should prevent SQL injection in user queries 8ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > SQL Injection Prevention > should prevent SQL injection in user service methods 6ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > SQL Injection Prevention > should safely handle special SQL characters in user data 8ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > NoSQL Injection Prevention > should prevent NoSQL injection in JSON fields 6ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > NoSQL Injection Prevention > should prevent NoSQL injection in audit log details 7ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Command Injection Prevention > should prevent command injection in user fields 6ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Path Traversal Prevention > should prevent path traversal in permission resource names 7ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Path Traversal Prevention > should validate resource names in permission strings 9ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > CSRF Protection Validation > should verify CSRF token requirements for state-changing operations 8ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > CSRF Protection Validation > should enforce origin validation for sensitive requests 8ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Mass Assignment Prevention > should prevent mass assignment of protected fields 11ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Mass Assignment Prevention > should prevent role permission escalation via mass assignment 13ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Information Disclosure Prevention > should not expose sensitive data in error messages 8ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Information Disclosure Prevention > should sanitize stack traces in production mode 7ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Information Disclosure Prevention > should not leak user enumeration via timing attacks 9ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Denial of Service (DoS) Prevention > should handle large permission arrays without crashing 8ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Denial of Service (DoS) Prevention > should handle deeply nested objects in audit logs 10ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Denial of Service (DoS) Prevention > should handle very long strings in user fields 14ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Prototype Pollution Prevention > should prevent prototype pollution in user metadata 8ms
     â†’ roleService.create is not a function
   Ã— Vulnerability Scanning Tests > Prototype Pollution Prevention > should prevent prototype pollution in audit log details 12ms
     â†’ roleService.create is not a function
stdout | src/test/services/titleService.integration.test.ts > TitleService Integration Tests
prisma:query INSERT INTO "public"."series" ("name","description","created_at","updated_at") VALUES ($1,$2,$3,$4) RETURNING "public"."series"."id", "public"."series"."name", "public"."series"."description", "public"."series"."created_at", "public"."series"."updated_at"
prisma:error 
Invalid `prisma.series.create()` invocation:


Unique constraint failed on the fields: (`name`)

stdout | src/test/services/titleService.integration.test.ts > TitleService Integration Tests
prisma:query DELETE FROM "public"."titles" WHERE "public"."titles"."isbn"::text LIKE $1
prisma:error 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `price_history_title_id_fkey`

 â¯ src/test/services/titleService.integration.test.ts (29 tests | 29 skipped) 50ms
stdout | src/test/api/titles-bulk.integration.test.ts > Title Bulk Operations API Integration Tests
prisma:query INSERT INTO "public"."series" ("name","description","created_at","updated_at") VALUES ($1,$2,$3,$4) RETURNING "public"."series"."id", "public"."series"."name", "public"."series"."description", "public"."series"."created_at", "public"."series"."updated_at"
prisma:error 
Invalid `prisma.series.create()` invocation:


Unique constraint failed on the fields: (`name`)

stdout | src/test/api/titles-bulk.integration.test.ts > Title Bulk Operations API Integration Tests
prisma:query DELETE FROM "public"."titles" WHERE "public"."titles"."isbn"::text LIKE $1
prisma:error 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `price_history_title_id_fkey`

 â¯ src/test/api/titles-bulk.integration.test.ts (18 tests | 18 skipped) 42ms
stdout | src/test/api/titles.integration.test.ts > Title API Integration Tests
prisma:query INSERT INTO "public"."series" ("name","description","created_at","updated_at") VALUES ($1,$2,$3,$4) RETURNING "public"."series"."id", "public"."series"."name", "public"."series"."description", "public"."series"."created_at", "public"."series"."updated_at"
prisma:error 
Invalid `prisma.series.create()` invocation:


Unique constraint failed on the fields: (`name`)

stdout | src/test/api/titles.integration.test.ts > Title API Integration Tests
prisma:query DELETE FROM "public"."titles" WHERE "public"."titles"."isbn"::text LIKE $1
prisma:error 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `price_history_title_id_fkey`

 â¯ src/test/api/titles.integration.test.ts (18 tests | 18 skipped) 37ms
stderr | src/test/components/titles/title-detail.test.tsx > TitleDetailPage Component > Rendering > should display loading state initially
An update to TitleDetailPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 â¯ src/test/models/inventory.test.ts (22 tests | 2 failed) 655ms
   Ã— Inventory Model > Relationships > should handle cascade deletion from title 48ms
     â†’ 
Invalid `prisma.title.delete()` invocation:


Foreign key constraint violated on the constraint: `inventory_title_id_fkey`
   Ã— Inventory Model > Relationships > should handle cascade deletion from warehouse 17ms
     â†’ 
Invalid `prisma.warehouse.delete()` invocation:


Foreign key constraint violated on the constraint: `inventory_warehouse_id_fkey`
stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > complete warehouse creation flow: admin creates a new physical warehouse successfully
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","address_line1","address_line2","city","state_province","postal_code","country","contact_name","contact_email","contact_phone","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse creation with duplicate code should fail with clear error
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse edit flow: admin updates warehouse details successfully
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","city","country","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7,$8,$9) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse status management flow: admin activates and deactivates warehouse
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse list with search and filters flow: user searches and filters warehouses
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","city","country","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7,$8,$9) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse pagination flow: user navigates through pages
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse creation with virtual type: admin creates online fulfillment center
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7,$8) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse deletion prevention: warehouse with inventory cannot be deleted
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse deletion success: empty warehouse can be deleted
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse deletion success: empty warehouse can be deleted
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE ("public"."warehouses"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse deletion success: empty warehouse can be deleted
prisma:query SELECT "public"."inventory"."id", "public"."inventory"."title_id", "public"."inventory"."warehouse_id", "public"."inventory"."current_stock", "public"."inventory"."reserved_stock", "public"."inventory"."last_movement_date", "public"."inventory"."last_stock_check", "public"."inventory"."created_at", "public"."inventory"."updated_at" FROM "public"."inventory" WHERE "public"."inventory"."warehouse_id" IN ($1) OFFSET $2

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse deletion success: empty warehouse can be deleted
prisma:query DELETE FROM "public"."warehouses" WHERE ("public"."warehouses"."id" = $1 AND 1=1) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:query SELECT "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at" FROM "public"."warehouses" WHERE ("public"."warehouses"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse code case sensitivity: codes are stored as provided
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse maintenance status flow: admin sets warehouse to maintenance mode
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse third-party type: admin creates third-party fulfillment warehouse
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","contact_name","contact_email","notes","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7,$8,$9,$10) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

 â¯ src/test/e2e/warehouse-management-flow.test.ts (12 tests | 11 failed) 177ms
   Ã— E2E: Warehouse Management Flow > complete warehouse creation flow: admin creates a new physical warehouse successfully 29ms
     â†’ Warehouse with code UK-LON-01 already exists
   Ã— E2E: Warehouse Management Flow > warehouse creation with duplicate code should fail with clear error 8ms
     â†’ Warehouse with code UK-LON already exists
   Ã— E2E: Warehouse Management Flow > warehouse edit flow: admin updates warehouse details successfully 13ms
     â†’ Warehouse with code US-NYC already exists
   Ã— E2E: Warehouse Management Flow > warehouse status management flow: admin activates and deactivates warehouse 7ms
     â†’ Warehouse with code TEST-01 already exists
   Ã— E2E: Warehouse Management Flow > warehouse list with search and filters flow: user searches and filters warehouses 9ms
     â†’ Warehouse with code UK-LON already exists
   Ã— E2E: Warehouse Management Flow > warehouse pagination flow: user navigates through pages 6ms
     â†’ Warehouse with code WH-001 already exists
   Ã— E2E: Warehouse Management Flow > warehouse creation with virtual type: admin creates online fulfillment center 7ms
     â†’ Warehouse with code ONLINE already exists
   Ã— E2E: Warehouse Management Flow > warehouse deletion prevention: warehouse with inventory cannot be deleted 9ms
     â†’ Warehouse with code TEST-DEL already exists
   Ã— E2E: Warehouse Management Flow > warehouse code case sensitivity: codes are stored as provided 14ms
     â†’ Warehouse with code UK-TEST already exists
   Ã— E2E: Warehouse Management Flow > warehouse maintenance status flow: admin sets warehouse to maintenance mode 10ms
     â†’ Warehouse with code MAINT-TEST already exists
   Ã— E2E: Warehouse Management Flow > warehouse third-party type: admin creates third-party fulfillment warehouse 9ms
     â†’ Warehouse with code AMZN-FBA already exists
 â¯ src/test/models/audit-log.test.ts (19 tests | 3 failed) 316ms
   Ã— AuditLog Model > Queries > should find logs by user 25ms
     â†’ expected [ { â€¦(9) } ] to have a length of 2 but got 1
   Ã— AuditLog Model > Relationships > should include user information 16ms
     â†’ expected undefined to be 'audit@example.com' // Object.is equality
   Ã— AuditLog Model > Complex Details > should store array data in details 28ms
     â†’ 
Invalid `prisma.auditLog.create()` invocation:


Foreign key constraint violated on the constraint: `audit_logs_user_id_fkey`
 â¯ src/test/models/user-role.test.ts (19 tests | 1 failed) 338ms
   Ã— UserRole Model > Creation > should create user role with required fields only 48ms
     â†’ 
Invalid `prisma.userRole.create()` invocation:


Foreign key constraint violated on the constraint: `user_roles_user_id_fkey`
 â¯ src/test/models/inventory-tracking-schema.test.ts (18 tests | 3 failed) 295ms
   Ã— Inventory Tracking Schema Extensions > StockMovement.createdBy > should link to user for audit trail 16ms
     â†’ expected undefined to be 'Admin' // Object.is equality
   Ã— Inventory Tracking Schema Extensions > StockMovement.createdBy > should support filtering movements by creator 43ms
     â†’ 
Invalid `prisma.stockMovement.create()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
   Ã— Inventory Tracking Schema Extensions > Index performance verification > should have index on createdBy for audit queries 23ms
     â†’ expected [ â€¦(2) ] to have a length of 10 but got 2
 â¯ src/test/models/title.test.ts (20 tests | 9 failed) 268ms
   Ã— Title Model > Creation > should create title with required fields only 38ms
     â†’ expected 19.99 to deeply equal 19.99
   Ã— Title Model > Creation > should create title with all publishing metadata 15ms
     â†’ 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `inventory_title_id_fkey`
   Ã— Title Model > Validation > should enforce field length constraints 3ms
     â†’ 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
   Ã— Title Model > Validation > should validate decimal precision for financial fields 8ms
     â†’ expected 999999.99 to deeply equal 999999.99
   Ã— Title Model > Relationships > should handle series deletion impact 35ms
     â†’ promise resolved "{ id: 23, â€¦(4) }" instead of rejecting
   Ã— Title Model > Queries > should search titles by various fields 13ms
     â†’ expected [] to have a length of 1 but got +0
   Ã— Title Model > Queries > should order titles by various fields 3ms
     â†’ 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
   Ã— Title Model > Updates > should update publishing metadata 3ms
     â†’ 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
   Ã— Title Model > Updates > should update commercial fields 4ms
     â†’ 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
 âœ“ src/test/models/warehouse.test.ts (28 tests) 264ms
stderr | src/test/components/titles/title-list.test.tsx > TitlesPage Component > Authentication and Loading States > should show loading state while fetching data
An update to TitlesPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 âœ“ src/test/services/stockMovementService.test.ts (18 tests) 10ms
 â¯ src/test/components/titles/title-detail.test.tsx (22 tests | 4 failed) 2457ms
   Ã— TitleDetailPage Component > Rendering > should not render inventory section when no inventory 21ms
     â†’ expect(element).not.toBeInTheDocument()

expected document not to contain element, found <h3
  class="text-lg font-medium text-gray-900 mb-4"
>
  Inventory Summary
</h3> instead
   Ã— TitleDetailPage Component > Delete Functionality > should display error when delete fails 1030ms
     â†’ expect(element).toHaveTextContent()

Expected element to have text content:
  Cannot delete title with existing inventory
Received:
  Delete TitleAre you sure you want to delete "The Opinionated Guide to React"? This action cannot be undone.Warning: This title has 2300 units in inventory and cannot be deleted.

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-gray-500 hover:text-gray-700"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"h-6 w-6"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M15 19l-7-7 7-7"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitle Details[0m
              [36m</h1>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"user-menu"[39m
            [36m>[39m
              [0mUser Menu[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-start"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
                  [36m>[39m
                    [0mThe Opinionated Guide to React[0m
                  [36m</h2>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-xl text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mby [0m
                    [0mSara Drasner[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mISBN: [0m
                    [0m9781234567890[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                  [36m>[39m
                    [0mSeries: [0m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-indigo-600"[39m
                    [36m>[39m
                      [0mOpinionated Guides[0m
                    [36m</span>[39m
                    [0m (Book 1)[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex space-x-2"[39m
                [36m>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                  [36m>[39m
                    [0mEdit[0m
                  [36m</button>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"[39m
                  [36m>[39m
                    [0mDelete[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
              [36m>[39m
                [0mMetadata[0m
              [36m</h3>[39m
              [36m<dl[39m
                [33mclass[39m=[32m"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mPAPERBACK[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mO'Reilly Media[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublication Date[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m1 March 2025[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPage Count[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m350[0m
 ...
   Ã— TitleDetailPage Component > Optional Fields > should display N/A for missing optional fields 12ms
     â†’ expected 0 to be greater than 5
   Ã— TitleDetailPage Component > Optional Fields > should not display price history section when empty 1008ms
     â†’ expect(element).toHaveTextContent()

Expected element to have text content:
  No price history available
Received:
  Price HistoryEffective FromEffective ToRRPUnit CostTrade DiscountReason1 January 2025CurrentÂ£29.99Â£8.5040.00%Initial price

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-gray-500 hover:text-gray-700"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"h-6 w-6"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M15 19l-7-7 7-7"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitle Details[0m
              [36m</h1>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"user-menu"[39m
            [36m>[39m
              [0mUser Menu[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-start"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
                  [36m>[39m
                    [0mThe Opinionated Guide to React[0m
                  [36m</h2>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-xl text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mby [0m
                    [0mSara Drasner[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mISBN: [0m
                    [0m9781234567890[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                  [36m>[39m
                    [0mSeries: [0m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-indigo-600"[39m
                    [36m>[39m
                      [0mOpinionated Guides[0m
                    [36m</span>[39m
                    [0m (Book 1)[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex space-x-2"[39m
                [36m>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                  [36m>[39m
                    [0mEdit[0m
                  [36m</button>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"[39m
                  [36m>[39m
                    [0mDelete[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
              [36m>[39m
                [0mMetadata[0m
              [36m</h3>[39m
              [36m<dl[39m
                [33mclass[39m=[32m"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mPAPERBACK[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mO'Reilly Media[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublication Date[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m1 March 2025[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPage Count[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m350[0m
 ...
stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user can delete title without inventory
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with inventory
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user can delete title after inventory depleted
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with inventory across multiple warehouses
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with reserved inventory
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with committed inventory
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > delete confirmation dialog shows inventory warning
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user can delete title with zero inventory in all warehouses
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > deletion cascades to price history
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete non-existent title
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > bulk delete not allowed if any title has inventory
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

stdout | src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > delete validation message is clear and helpful
prisma:query INSERT INTO "public"."warehouses" ("name","code","type","status","is_active","created_at","updated_at") VALUES ($1,$2,CAST($3::text AS "public"."WarehouseType"),CAST($4::text AS "public"."WarehouseStatus"),$5,$6,$7) RETURNING "public"."warehouses"."id", "public"."warehouses"."name", "public"."warehouses"."code", "public"."warehouses"."type"::text, "public"."warehouses"."status"::text, "public"."warehouses"."is_active", "public"."warehouses"."location", "public"."warehouses"."fulfillsChannels", "public"."warehouses"."address_line1", "public"."warehouses"."address_line2", "public"."warehouses"."city", "public"."warehouses"."state_province", "public"."warehouses"."postal_code", "public"."warehouses"."country", "public"."warehouses"."contact_name", "public"."warehouses"."contact_email", "public"."warehouses"."contact_phone", "public"."warehouses"."notes", "public"."warehouses"."created_at", "public"."warehouses"."updated_at"
prisma:error 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)

 â¯ src/test/e2e/title-delete-validation-flow.test.ts (12 tests | 12 failed) 152ms
   Ã— E2E: Title Delete Validation Flow > user can delete title without inventory 65ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > user cannot delete title with inventory 21ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > user can delete title after inventory depleted 7ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > user cannot delete title with inventory across multiple warehouses 6ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > user cannot delete title with reserved inventory 5ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > user cannot delete title with committed inventory 7ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > delete confirmation dialog shows inventory warning 6ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > user can delete title with zero inventory in all warehouses 5ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > deletion cascades to price history 6ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > user cannot delete non-existent title 5ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > bulk delete not allowed if any title has inventory 6ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
   Ã— E2E: Title Delete Validation Flow > delete validation message is clear and helpful 7ms
     â†’ 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should allow authenticated requests to proceed
Starting API auth validation...
Request URL: http://localhost/api/protected
Auth userId: clerk_auth_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should allow authenticated requests to proceed
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:40:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:40:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should reject unauthenticated requests
Starting API auth validation...
Request URL: http://localhost/api/protected
Auth userId: null
No userId found, throwing Unauthorized error

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should reject unauthenticated requests
Error in validate_api_auth: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:209:13)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:57:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:57:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should handle authentication errors gracefully
Starting API auth validation...
Request URL: http://localhost/api/protected

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should handle authentication errors gracefully
Error in validate_api_auth: Error: Auth service unavailable
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:70:41
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)
    at file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11
    at withEnv (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:90:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:76:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should add user context to request
Starting API auth validation...
Request URL: http://localhost/api/protected
Auth userId: clerk_context_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should add user context to request
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:107:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:107:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should allow requests with required permission
Starting API auth validation...
Request URL: http://localhost/api/titles
Auth userId: clerk_perm_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should allow requests with required permission
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:133:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:133:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should reject requests without required permission
Starting API auth validation...
Request URL: http://localhost/api/titles
Auth userId: clerk_no_perm_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should reject requests without required permission
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:156:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:156:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should allow requests with any of multiple required permissions
Starting API auth validation...
Request URL: http://localhost/api/inventory
Auth userId: clerk_multi_perm_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should allow requests with any of multiple required permissions
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:187:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:187:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Audit Logging Middleware > should create audit log for protected requests
Starting API auth validation...
Request URL: http://localhost/api/titles
Auth userId: clerk_audit_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Audit Logging Middleware > should create audit log for protected requests
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:218:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:218:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Audit Logging Middleware > should include request details in audit log
Starting API auth validation...
Request URL: http://localhost/api/inventory/123
Auth userId: clerk_detail_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Audit Logging Middleware > should include request details in audit log
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:260:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:260:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Error Handling > should handle middleware errors gracefully
Starting API auth validation...
Request URL: http://localhost/api/error
Auth userId: clerk_error_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Error Handling > should handle middleware errors gracefully
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:292:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:292:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Error Handling > should handle database connection errors
Starting API auth validation...
Request URL: http://localhost/api/test
Auth userId: clerk_db_error_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Error Handling > should handle database connection errors
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:328:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:328:24
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Performance Tests > should complete middleware processing in under 100ms
Starting API auth validation...
Request URL: http://localhost/api/perf
Auth userId: clerk_perf_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Performance Tests > should complete middleware processing in under 100ms
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:356:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:356:7
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Performance Tests > should handle concurrent requests efficiently
Starting API auth validation...
Request URL: http://localhost/api/test0
Starting API auth validation...
Request URL: http://localhost/api/test1
Starting API auth validation...
Request URL: http://localhost/api/test2
Starting API auth validation...
Request URL: http://localhost/api/test3
Starting API auth validation...
Request URL: http://localhost/api/test4
Starting API auth validation...
Request URL: http://localhost/api/test5
Starting API auth validation...
Request URL: http://localhost/api/test6
Starting API auth validation...
Request URL: http://localhost/api/test7
Starting API auth validation...
Request URL: http://localhost/api/test8
Starting API auth validation...
Request URL: http://localhost/api/test9
Starting API auth validation...
Request URL: http://localhost/api/test10
Starting API auth validation...
Request URL: http://localhost/api/test11
Starting API auth validation...
Request URL: http://localhost/api/test12
Starting API auth validation...
Request URL: http://localhost/api/test13
Starting API auth validation...
Request URL: http://localhost/api/test14
Starting API auth validation...
Request URL: http://localhost/api/test15
Starting API auth validation...
Request URL: http://localhost/api/test16
Starting API auth validation...
Request URL: http://localhost/api/test17
Starting API auth validation...
Request URL: http://localhost/api/test18
Starting API auth validation...
Request URL: http://localhost/api/test19
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user
Auth userId: clerk_concurrent_user

stderr | src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Performance Tests > should handle concurrent requests efficiently
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 0)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 1)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 2)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 3)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 4)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 5)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 6)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 7)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 8)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 9)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 10)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 11)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 12)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 13)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 14)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 15)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 16)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 17)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 18)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 19)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 0)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 1)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 2)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 3)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 4)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 5)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 6)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 7)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 8)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 9)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 10)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 11)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 12)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 13)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 14)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 15)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 16)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 17)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 18)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
API Auth Middleware Error: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:235:11)
    at /Users/michaelblom/dev/stockly2/src/middleware/apiAuthMiddleware.ts:35:24
    at async Promise.all (index 19)
    at /Users/michaelblom/dev/stockly2/src/test/middleware/apiAuthMiddleware.test.ts:385:25
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)

 â¯ src/test/middleware/apiAuthMiddleware.test.ts (13 tests | 10 failed) 166ms
   Ã— API Auth Middleware > Authentication Middleware > should allow authenticated requests to proceed 41ms
     â†’ expected "spy" to be called with arguments: [ â€¦(1) ]

Received: 



Number of calls: 0

   Ã— API Auth Middleware > Authentication Middleware > should add user context to request 8ms
     â†’ expected "spy" to be called at least once
   Ã— API Auth Middleware > Permission Middleware > should allow requests with required permission 20ms
     â†’ expected "spy" to be called with arguments: [ â€¦(1) ]

Received: 



Number of calls: 0

   Ã— API Auth Middleware > Permission Middleware > should reject requests without required permission 8ms
     â†’ expected 401 to be 403 // Object.is equality
   Ã— API Auth Middleware > Permission Middleware > should allow requests with any of multiple required permissions 6ms
     â†’ expected "spy" to be called with arguments: [ â€¦(1) ]

Received: 



Number of calls: 0

   Ã— API Auth Middleware > Audit Logging Middleware > should create audit log for protected requests 9ms
     â†’ expected [] to have a length of 1 but got +0
   Ã— API Auth Middleware > Audit Logging Middleware > should include request details in audit log 10ms
     â†’ expected undefined to match object { action: 'inventory:update', â€¦(4) }
   Ã— API Auth Middleware > Error Handling > should handle middleware errors gracefully 9ms
     â†’ expected 401 to be 500 // Object.is equality
   Ã— API Auth Middleware > Error Handling > should handle database connection errors 7ms
     â†’ expected 401 to be 200 // Object.is equality
   Ã— API Auth Middleware > Performance Tests > should handle concurrent requests efficiently 13ms
     â†’ expected false to be true // Object.is equality
 âœ“ src/test/services/warehouseService.test.ts (23 tests) 9ms
 â¯ src/test/models/printer.test.ts (22 tests | 1 failed) 192ms
   Ã— Printer Model > Validation > should enforce field length constraints 15ms
     â†’ promise resolved "{ id: 40, â€¦(11) }" instead of rejecting
 â¯ src/test/integration/authorization-flow.test.ts (10 tests | 10 failed) 86ms
   Ã— Authorization Flow Integration > Complete Authorization Flow > should handle user registration to first authorized action 34ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Complete Authorization Flow > should handle role changes and permission updates 6ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Complete Authorization Flow > should handle concurrent role assignments 5ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Resource Access Patterns > should enforce resource-level permissions correctly 4ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Resource Access Patterns > should provide accurate accessible resources map 6ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Hierarchical Permission Testing > should handle wildcard permissions correctly 4ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Hierarchical Permission Testing > should respect permission boundaries for non-admin roles 4ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Multiple User Scenarios > should handle different users with different permissions 6ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Performance and Scale Testing > should handle permission checks efficiently with multiple roles 5ms
     â†’ roleService.create is not a function
   Ã— Authorization Flow Integration > Performance and Scale Testing > should handle many users with concurrent permission checks 5ms
     â†’ roleService.create is not a function
stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history created on title creation
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history updated when RRP changes
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history updated when unit cost changes
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history updated when both prices change
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > no price history created when prices unchanged
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > multiple price changes create complete history timeline
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > bulk price update creates history for all titles
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > user can view full price history with all details
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history preserved when title deleted
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

 â¯ src/test/e2e/title-price-history-flow.test.ts (9 tests | 9 failed) 104ms
   Ã— E2E: Price History Tracking Flow > price history created on title creation 49ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > price history updated when RRP changes 7ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > price history updated when unit cost changes 6ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > price history updated when both prices change 6ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > no price history created when prices unchanged 5ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > multiple price changes create complete history timeline 7ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > bulk price update creates history for all titles 6ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > user can view full price history with all details 6ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Price History Tracking Flow > price history preserved when title deleted 8ms
     â†’ Title with ISBN 9780306406157 already exists
 âœ“ src/test/unit/permission-logic.test.ts (23 tests) 6ms
stderr | src/test/components/titles/title-list.test.tsx > TitlesPage Component > Filter Functionality > should have format filter dropdown
An update to TitlesPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/test/components/titles/title-list.test.tsx > TitlesPage Component > Filter Functionality > should have category filter input
An update to TitlesPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

stderr | src/test/components/titles/title-list.test.tsx > TitlesPage Component > Filter Functionality > should have publisher filter input
An update to TitlesPage inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://react.dev/link/wrap-tests-with-act

 âœ“ src/test/lib/validators/isbn.test.ts (59 tests) 7ms
 âœ“ src/test/integration/user-registration-flow.test.ts (23 tests) 208ms
 âœ“ src/test/integration/clerk-webhook.test.ts (16 tests) 163ms
 â¯ src/test/services/authorizationService.test.ts (30 tests | 8 failed) 188ms
   Ã— Authorization Service > User Authorization > getUserPermissions > should return user permissions from database roles 7ms
     â†’ roleService.create is not a function
   Ã— Authorization Service > User Authorization > getUserPermissions > should return empty array for user with no roles 5ms
     â†’ roleService.create is not a function
   Ã— Authorization Service > User Authorization > getUserPermissions > should combine permissions from multiple roles 6ms
     â†’ roleService.create is not a function
   Ã— Authorization Service > User Authorization > userHasPermission > should check user permission against database roles 5ms
     â†’ roleService.create is not a function
   Ã— Authorization Service > User Authorization > userHasPermission > should return false for non-existent user 7ms
     â†’ roleService.create is not a function
   Ã— Authorization Service > User Authorization > userHasPermission > should handle wildcard permissions correctly 4ms
     â†’ roleService.create is not a function
   Ã— Authorization Service > Resource-based Authorization > getAccessibleResources > should return resources user can access 6ms
     â†’ Cannot find module '@/lib/clerk'
Require stack:
- /Users/michaelblom/dev/stockly2/src/services/authorizationService.ts
   Ã— Authorization Service > Resource-based Authorization > getAccessibleResources > should return all resources for admin 6ms
     â†’ Cannot find module '@/lib/clerk'
Require stack:
- /Users/michaelblom/dev/stockly2/src/services/authorizationService.ts
stderr | src/test/lib/auth.test.ts > Auth Library > get_current_user > should handle auth errors gracefully
Authentication error: Error: Auth failed
    at /Users/michaelblom/dev/stockly2/src/test/lib/auth.test.ts:77:41
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1271:3)

stdout | src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should create new user in database
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."clerk_id" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should create new user in database
prisma:query BEGIN
prisma:query UPDATE "public"."users" SET "email" = $1, "first_name" = $2, "last_name" = $3, "updated_at" = $4 WHERE ("public"."users"."clerk_id" = $5 AND 1=1) RETURNING "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at"
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT $2 OFFSET $3
prisma:query SELECT "public"."user_roles"."id", "public"."user_roles"."user_id", "public"."user_roles"."role_id", "public"."user_roles"."assigned_by", "public"."user_roles"."assigned_at", "public"."user_roles"."expires_at", "public"."user_roles"."is_active" FROM "public"."user_roles" WHERE "public"."user_roles"."user_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."roles"."id", "public"."roles"."name", "public"."roles"."description", "public"."roles"."permissions", "public"."roles"."is_system", "public"."roles"."is_active", "public"."roles"."created_at", "public"."roles"."updated_at" FROM "public"."roles" WHERE "public"."roles"."id" IN ($1) OFFSET $2
prisma:query COMMIT

stdout | src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should update existing user in database
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."clerk_id" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should update existing user in database
prisma:query BEGIN
prisma:query UPDATE "public"."users" SET "email" = $1, "first_name" = $2, "last_name" = $3, "updated_at" = $4 WHERE ("public"."users"."clerk_id" = $5 AND 1=1) RETURNING "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at"
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT $2 OFFSET $3
prisma:query SELECT "public"."user_roles"."id", "public"."user_roles"."user_id", "public"."user_roles"."role_id", "public"."user_roles"."assigned_by", "public"."user_roles"."assigned_at", "public"."user_roles"."expires_at", "public"."user_roles"."is_active" FROM "public"."user_roles" WHERE "public"."user_roles"."user_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."roles"."id", "public"."roles"."name", "public"."roles"."description", "public"."roles"."permissions", "public"."roles"."is_system", "public"."roles"."is_active", "public"."roles"."created_at", "public"."roles"."updated_at" FROM "public"."roles" WHERE "public"."roles"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."clerk_id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query UPDATE "public"."users" SET "email" = $1, "first_name" = $2, "last_name" = $3, "updated_at" = $4 WHERE ("public"."users"."clerk_id" = $5 AND 1=1) RETURNING "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at"
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT $2 OFFSET $3

stdout | src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should update existing user in database
prisma:query SELECT "public"."user_roles"."id", "public"."user_roles"."user_id", "public"."user_roles"."role_id", "public"."user_roles"."assigned_by", "public"."user_roles"."assigned_at", "public"."user_roles"."expires_at", "public"."user_roles"."is_active" FROM "public"."user_roles" WHERE "public"."user_roles"."user_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."roles"."id", "public"."roles"."name", "public"."roles"."description", "public"."roles"."permissions", "public"."roles"."is_system", "public"."roles"."is_active", "public"."roles"."created_at", "public"."roles"."updated_at" FROM "public"."roles" WHERE "public"."roles"."id" IN ($1) OFFSET $2
prisma:query COMMIT

stdout | src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should assign default role to new users
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."clerk_id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query UPDATE "public"."users" SET "email" = $1, "first_name" = $2, "last_name" = $3, "updated_at" = $4 WHERE ("public"."users"."clerk_id" = $5 AND 1=1) RETURNING "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at"
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT $2 OFFSET $3
prisma:query SELECT "public"."user_roles"."id", "public"."user_roles"."user_id", "public"."user_roles"."role_id", "public"."user_roles"."assigned_by", "public"."user_roles"."assigned_at", "public"."user_roles"."expires_at", "public"."user_roles"."is_active" FROM "public"."user_roles" WHERE "public"."user_roles"."user_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."roles"."id", "public"."roles"."name", "public"."roles"."description", "public"."roles"."permissions", "public"."roles"."is_system", "public"."roles"."is_active", "public"."roles"."created_at", "public"."roles"."updated_at" FROM "public"."roles" WHERE "public"."roles"."id" IN ($1) OFFSET $2
prisma:query COMMIT

stdout | src/test/lib/auth.test.ts > Auth Library > validate_api_auth > should return user info for authenticated request
Starting API auth validation...
Request URL: http://localhost/api/test
Auth userId: clerk_api_user

stderr | src/test/lib/auth.test.ts > Auth Library > validate_api_auth > should return user info for authenticated request
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at /Users/michaelblom/dev/stockly2/src/test/lib/auth.test.ts:241:22
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1262:5) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}

 âœ“ src/test/lib/validators/warehouse.test.ts (29 tests) 8ms
stdout | src/test/lib/auth.test.ts > Auth Library > validate_api_auth > should throw error for unauthenticated request
Starting API auth validation...
Request URL: http://localhost/api/test
Auth userId: null
No userId found, throwing Unauthorized error

stderr | src/test/lib/auth.test.ts > Auth Library > validate_api_auth > should throw error for unauthenticated request
Error in validate_api_auth: Error: Unauthorized
    at Module.validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:209:13)

stdout | src/test/lib/auth.test.ts > Auth Library > validate_api_permission > should return user info when user has permission
Starting API auth validation...
Request URL: http://localhost/api/test
Auth userId: clerk_perm_user

stderr | src/test/lib/auth.test.ts > Auth Library > validate_api_permission > should return user info when user has permission
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at Module.validate_api_permission (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:246:21)
    at /Users/michaelblom/dev/stockly2/src/test/lib/auth.test.ts:279:22
    at file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:533:5
    at runTest (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1056:11)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///Users/michaelblom/dev/stockly2/node_modules/@vitest/runner/dist/index.js:1205:15) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}

stdout | src/test/lib/auth.test.ts > Auth Library > validate_api_permission > should throw error when user lacks permission
Starting API auth validation...
Request URL: http://localhost/api/test
Auth userId: clerk_no_perm_user

stderr | src/test/lib/auth.test.ts > Auth Library > validate_api_permission > should throw error when user lacks permission
Error in validate_api_auth: Error: [vitest] No "currentUser" export is defined on the "@clerk/nextjs/server" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:

    at VitestMocker.createError (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:321:19)
    at Object.get (file:///Users/michaelblom/dev/stockly2/node_modules/vitest/dist/chunks/execute.2pr0rHgK.js:389:22)
    at validate_api_auth (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:213:24)
    at Module.validate_api_permission (/Users/michaelblom/dev/stockly2/src/lib/auth.ts:246:21) {
  codeFrame: 'vi.mock(import("@clerk/nextjs/server"), async (importOriginal) => {\n' +
    '  const actual = await importOriginal()\n' +
    '  return {\n' +
    '    ...actual,\n' +
    '    // your mocked methods\n' +
    '  }\n' +
    '})'
}

stdout | src/test/lib/auth.test.ts > Auth Library > create_audit_log > should create audit log entry
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."clerk_id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query UPDATE "public"."users" SET "email" = $1, "first_name" = $2, "last_name" = $3, "updated_at" = $4 WHERE ("public"."users"."clerk_id" = $5 AND 1=1) RETURNING "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at"
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT $2 OFFSET $3
prisma:query SELECT "public"."user_roles"."id", "public"."user_roles"."user_id", "public"."user_roles"."role_id", "public"."user_roles"."assigned_by", "public"."user_roles"."assigned_at", "public"."user_roles"."expires_at", "public"."user_roles"."is_active" FROM "public"."user_roles" WHERE "public"."user_roles"."user_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."roles"."id", "public"."roles"."name", "public"."roles"."description", "public"."roles"."permissions", "public"."roles"."is_system", "public"."roles"."is_active", "public"."roles"."created_at", "public"."roles"."updated_at" FROM "public"."roles" WHERE "public"."roles"."id" IN ($1) OFFSET $2
prisma:query COMMIT
prisma:error 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    user_id: NaN,
    ~~~~~~~
    action: "user:login",
    details: {
      timestamp: new Date("2025-11-01T23:38:37.299Z")
    },
    ip_address: null,
    user_agent: null,
    timestamp: new Date("2025-11-01T23:38:37.299Z"),
?   id?: String,
?   resource?: String | Null,
?   resourceId?: String | Null,
?   ipAddress?: String | Null,
?   userAgent?: String | Null,
?   user?: UserCreateNestedOneWithoutAuditLogsInput
  }
}

Unknown argument `user_id`. Did you mean `user`? Available options are marked with ?.

stdout | src/test/lib/auth.test.ts > Auth Library > create_audit_log > should capture IP address and user agent from request
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE ("public"."users"."clerk_id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:query UPDATE "public"."users" SET "email" = $1, "first_name" = $2, "last_name" = $3, "updated_at" = $4 WHERE ("public"."users"."clerk_id" = $5 AND 1=1) RETURNING "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at"
prisma:query SELECT "public"."users"."id", "public"."users"."clerk_id", "public"."users"."email", "public"."users"."first_name", "public"."users"."last_name", "public"."users"."is_active", "public"."users"."last_login_at", "public"."users"."created_at", "public"."users"."updated_at" FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT $2 OFFSET $3
prisma:query SELECT "public"."user_roles"."id", "public"."user_roles"."user_id", "public"."user_roles"."role_id", "public"."user_roles"."assigned_by", "public"."user_roles"."assigned_at", "public"."user_roles"."expires_at", "public"."user_roles"."is_active" FROM "public"."user_roles" WHERE "public"."user_roles"."user_id" IN ($1) OFFSET $2
prisma:query SELECT "public"."roles"."id", "public"."roles"."name", "public"."roles"."description", "public"."roles"."permissions", "public"."roles"."is_system", "public"."roles"."is_active", "public"."roles"."created_at", "public"."roles"."updated_at" FROM "public"."roles" WHERE "public"."roles"."id" IN ($1) OFFSET $2
prisma:query COMMIT

stdout | src/test/lib/auth.test.ts > Auth Library > create_audit_log > should capture IP address and user agent from request
prisma:error 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    user_id: NaN,
    ~~~~~~~
    action: "user:action",
    details: {
      data: "test"
    },
    ip_address: "192.168.1.100",
    user_agent: "Test Browser 1.0",
    timestamp: new Date("2025-11-01T23:38:37.321Z"),
?   id?: String,
?   resource?: String | Null,
?   resourceId?: String | Null,
?   ipAddress?: String | Null,
?   userAgent?: String | Null,
?   user?: UserCreateNestedOneWithoutAuditLogsInput
  }
}

Unknown argument `user_id`. Did you mean `user`? Available options are marked with ?.

 â¯ src/test/lib/auth.test.ts (18 tests | 7 failed) 203ms
   Ã— Auth Library > sync_user_to_database > should create new user in database 28ms
     â†’ expected { â€¦(10) } to match object { clerk_id: 'clerk_new_user', â€¦(4) }
(9 matching properties omitted from actual)
   Ã— Auth Library > sync_user_to_database > should update existing user in database 19ms
     â†’ expected { â€¦(10) } to match object { â€¦(4) }
(9 matching properties omitted from actual)
   Ã— Auth Library > validate_api_auth > should return user info for authenticated request 9ms
     â†’ Unauthorized
   Ã— Auth Library > validate_api_permission > should return user info when user has permission 7ms
     â†’ Unauthorized
   Ã— Auth Library > validate_api_permission > should throw error when user lacks permission 7ms
     â†’ expected [Function] to throw error including 'Forbidden' but got 'Unauthorized'
   Ã— Auth Library > create_audit_log > should create audit log entry 19ms
     â†’ 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    user_id: NaN,
    ~~~~~~~
    action: "user:login",
    details: {
      timestamp: new Date("2025-11-01T23:38:37.299Z")
    },
    ip_address: null,
    user_agent: null,
    timestamp: new Date("2025-11-01T23:38:37.299Z"),
?   id?: String,
?   resource?: String | Null,
?   resourceId?: String | Null,
?   ipAddress?: String | Null,
?   userAgent?: String | Null,
?   user?: UserCreateNestedOneWithoutAuditLogsInput
  }
}

Unknown argument `user_id`. Did you mean `user`? Available options are marked with ?.
   Ã— Auth Library > create_audit_log > should capture IP address and user agent from request 12ms
     â†’ 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    user_id: NaN,
    ~~~~~~~
    action: "user:action",
    details: {
      data: "test"
    },
    ip_address: "192.168.1.100",
    user_agent: "Test Browser 1.0",
    timestamp: new Date("2025-11-01T23:38:37.321Z"),
?   id?: String,
?   resource?: String | Null,
?   resourceId?: String | Null,
?   ipAddress?: String | Null,
?   userAgent?: String | Null,
?   user?: UserCreateNestedOneWithoutAuditLogsInput
  }
}

Unknown argument `user_id`. Did you mean `user`? Available options are marked with ?.
stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user successfully imports multiple valid titles
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user successfully imports multiple valid titles
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user successfully imports multiple valid titles
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user successfully imports multiple valid titles
prisma:query BEGIN

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user successfully imports multiple valid titles
prisma:error 
Invalid `prisma.title.create()` invocation:

{
  data: {
    isbn: "9780306406171",
    title: "Book Three",
    author: "Author Three",
    rrp: new Prisma.Decimal("19.99"),
    unitCost: new Prisma.Decimal("5"),
    publisher: "Publisher C",
    category: "Fiction",
    tradeDiscount: null,
    royaltyRate: null,
    publicationDate: null,
+   format: Format
  },
  include: {
    series: true
  }
}

Argument `format` is missing.
prisma:query ROLLBACK

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports with partial failures shows detailed error report
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports with partial failures shows detailed error report
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user can download error report after failed imports
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user cannot import duplicate ISBNs within same batch
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user cannot import ISBN that already exists in database
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports large batch of titles successfully
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports large batch of titles successfully
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:error 
Invalid `prisma.title.create()` invocation:

{
  data: {
    isbn: "9780306406171",
    title: "Book 15",
    author: "Author 15",
    rrp: new Prisma.Decimal("43.989999999999995"),
    unitCost: new Prisma.Decimal("15.5"),
    tradeDiscount: null,
    royaltyRate: null,
    publicationDate: null,
+   format: Format
  },
  include: {
    series: true
  }
}

Argument `format` is missing.
prisma:query ROLLBACK
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports large batch of titles successfully
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports large batch of titles successfully
prisma:error 
Invalid `prisma.title.create()` invocation:

{
  data: {
    isbn: "9780306406195",
    title: "Book 39",
    author: "Author 39",
    rrp: new Prisma.Decimal("67.99"),
    unitCost: new Prisma.Decimal("27.5"),
    tradeDiscount: null,
    royaltyRate: null,
    publicationDate: null,
+   format: Format
  },
  include: {
    series: true
  }
}

Argument `format` is missing.
prisma:query ROLLBACK
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query BEGIN
prisma:error 
Invalid `prisma.title.create()` invocation:

{
  data: {
    isbn: "9780306406201",
    title: "Book 45",
    author: "Author 45",
    rrp: new Prisma.Decimal("73.99"),
    unitCost: new Prisma.Decimal("30.5"),
    tradeDiscount: null,
    royaltyRate: null,
    publicationDate: null,
+   format: Format
  },
  include: {
    series: true
  }
}

Argument `format` is missing.
prisma:query ROLLBACK

stdout | src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user can retry failed imports after fixing errors
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

 â¯ src/test/e2e/title-bulk-import-flow.test.ts (8 tests | 7 failed) 129ms
   Ã— E2E: Title Bulk Import Flow > user successfully imports multiple valid titles 76ms
     â†’ expected +0 to be 3 // Object.is equality
   Ã— E2E: Title Bulk Import Flow > user imports with partial failures shows detailed error report 8ms
     â†’ expected +0 to be 2 // Object.is equality
   Ã— E2E: Title Bulk Import Flow > user can download error report after failed imports 7ms
     â†’ expected [ { row: 1, â€¦(2) }, { row: 2, â€¦(2) } ] to have a length of 1 but got 2
   Ã— E2E: Title Bulk Import Flow > user cannot import duplicate ISBNs within same batch 7ms
     â†’ expected +0 to be 1 // Object.is equality
   Ã— E2E: Title Bulk Import Flow > user cannot import ISBN that already exists in database 5ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Bulk Import Flow > user imports large batch of titles successfully 12ms
     â†’ expected 0 to be greater than 0
   Ã— E2E: Title Bulk Import Flow > user can retry failed imports after fixing errors 5ms
     â†’ expected 2 to be 1 // Object.is equality
 âœ“ src/test/models/role.test.ts (17 tests) 120ms
stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can see all titles without filters
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can search titles by title text
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can search titles by author name
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can search titles by ISBN
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can filter titles by format
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can filter titles by category
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can filter titles by publisher
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

 â¯ src/test/components/titles/title-form.test.tsx (27 tests | 4 failed) 4674ms
   Ã— TitleForm Component > Form Validation > should validate ISBN format 1026ms
     â†’ Unable to find an element with the text: /Invalid ISBN/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
        [36m>[39m
          [0mCore Information[0m
        [36m</h3>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"isbn"[39m
            [36m>[39m
              [0mISBN [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"isbn"[39m
              [33mname[39m=[32m"isbn"[39m
              [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mISBN must be at least 10 characters[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
            [36m>[39m
              [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"title"[39m
            [36m>[39m
              [0mTitle [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"title"[39m
              [33mname[39m=[32m"title"[39m
              [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mTitle is required[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"author"[39m
            [36m>[39m
              [0mAuthor [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"author"[39m
              [33mname[39m=[32m"author"[39m
              [33mplaceholder[39m=[32m"Sara Drasner"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mAuthor is required[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"format"[39m
            [36m>[39m
              [0mFormat [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<select[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"format"[39m
              [33mname[39m=[32m"format"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"PAPERBACK"[39m
              [36m>[39m
                [0mPaperback[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HARDCOVER"[39m
              [36m>[39m
                [0mHardcover[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DIGITAL"[39m
              [36m>[39m
                [0mDigital[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"AUDIOBOOK"[39m
              [36m>[39m
                [0mAudiobook[0m
              [36m</option>[39m
            [36m</select>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publisher"[39m
            [36m>[39m
              [0mPublisher[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publisher"[39m
              [33mname[39m=[32m"publisher"[39m
              [33mplaceholder[39m=[32m"O'Reilly Media"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publicationDate"[39m
            [36m>[39m
              [0mPublication Date[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publicationDate"[39m
              [33mname[39m=[32m"publicationDate"[39m
        ...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mISBN must be at least 10 characters[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mTitle is required[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mAuthor is required[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Da...
   Ã— TitleForm Component > Form Submission > should submit form with valid data in create mode 1047ms
     â†’ expected "spy" to be called with arguments: [ '/api/titles', ObjectContaining{â€¦} ]

Received: 



Number of calls: 0


Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mInvalid ISBN format or checksum[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Date[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publicationDate"[39m
                [33mname[39m=[32m"publicationDate"[39m
                [3...
   Ã— TitleForm Component > Form Submission > should display loading state during submission 1041ms
     â†’ Unable to find an element with the text: /Creating.../i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
        [36m>[39m
          [0mCore Information[0m
        [36m</h3>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"isbn"[39m
            [36m>[39m
              [0mISBN [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"isbn"[39m
              [33mname[39m=[32m"isbn"[39m
              [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid ISBN format or checksum[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
            [36m>[39m
              [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"title"[39m
            [36m>[39m
              [0mTitle [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"title"[39m
              [33mname[39m=[32m"title"[39m
              [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"author"[39m
            [36m>[39m
              [0mAuthor [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"author"[39m
              [33mname[39m=[32m"author"[39m
              [33mplaceholder[39m=[32m"Sara Drasner"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"format"[39m
            [36m>[39m
              [0mFormat [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<select[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"format"[39m
              [33mname[39m=[32m"format"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"PAPERBACK"[39m
              [36m>[39m
                [0mPaperback[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HARDCOVER"[39m
              [36m>[39m
                [0mHardcover[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DIGITAL"[39m
              [36m>[39m
                [0mDigital[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"AUDIOBOOK"[39m
              [36m>[39m
                [0mAudiobook[0m
              [36m</option>[39m
            [36m</select>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publisher"[39m
            [36m>[39m
              [0mPublisher[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publisher"[39m
              [33mname[39m=[32m"publisher"[39m
              [33mplaceholder[39m=[32m"O'Reilly Media"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publicationDate"[39m
            [36m>[39m
              [0mPublication Date[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publicationDate"[39m
              [33mname[39m=[32m"publicationDate"[39m
              [33mtype[39m=[32m"date"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid date[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mInvalid ISBN format or checksum[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Date[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publicationDate"[39m
                [33mname[39m=[32m"publicationDate"[39m
                [3...
   Ã— TitleForm Component > Form Submission > should display API error on failed submission 1044ms
     â†’ Unable to find an element with the text: /Duplicate ISBN/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
        [36m>[39m
          [0mCore Information[0m
        [36m</h3>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"isbn"[39m
            [36m>[39m
              [0mISBN [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"isbn"[39m
              [33mname[39m=[32m"isbn"[39m
              [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid ISBN format or checksum[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
            [36m>[39m
              [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"title"[39m
            [36m>[39m
              [0mTitle [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"title"[39m
              [33mname[39m=[32m"title"[39m
              [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"author"[39m
            [36m>[39m
              [0mAuthor [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"author"[39m
              [33mname[39m=[32m"author"[39m
              [33mplaceholder[39m=[32m"Sara Drasner"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"format"[39m
            [36m>[39m
              [0mFormat [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<select[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"format"[39m
              [33mname[39m=[32m"format"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"PAPERBACK"[39m
              [36m>[39m
                [0mPaperback[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HARDCOVER"[39m
              [36m>[39m
                [0mHardcover[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DIGITAL"[39m
              [36m>[39m
                [0mDigital[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"AUDIOBOOK"[39m
              [36m>[39m
                [0mAudiobook[0m
              [36m</option>[39m
            [36m</select>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publisher"[39m
            [36m>[39m
              [0mPublisher[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publisher"[39m
              [33mname[39m=[32m"publisher"[39m
              [33mplaceholder[39m=[32m"O'Reilly Media"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publicationDate"[39m
            [36m>[39m
              [0mPublication Date[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publicationDate"[39m
              [33mname[39m=[32m"publicationDate"[39m
              [33mtype[39m=[32m"date"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid date[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mInvalid ISBN format or checksum[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Date[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publicationDate"[39m
                [33mname[39m=[32m"publicationDate"[39m
                [3...
stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can combine search with format filter
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can combine multiple filters
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can sort titles by title ascending
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can sort titles by title descending
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can paginate through results
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > search with no results returns empty list
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > case-insensitive search works correctly
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can clear all filters and see all results again
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

 â¯ src/test/e2e/title-search-filter-flow.test.ts (15 tests | 15 failed) 166ms
   Ã— E2E: Title Search and Filter Flow > user can see all titles without filters 66ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can search titles by title text 9ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can search titles by author name 8ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can search titles by ISBN 7ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can filter titles by format 7ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can filter titles by category 10ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can filter titles by publisher 6ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can combine search with format filter 7ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can combine multiple filters 7ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can sort titles by title ascending 6ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can sort titles by title descending 6ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can paginate through results 5ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > search with no results returns empty list 5ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > case-insensitive search works correctly 5ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Search and Filter Flow > user can clear all filters and see all results again 6ms
     â†’ Title with ISBN 9780306406157 already exists
 â¯ src/test/api/warehouses.integration.test.ts (17 tests | 3 failed) 185ms
   Ã— Warehouse API Integration Tests > GET /api/warehouses > should filter warehouses by type 14ms
     â†’ expected [] to have a length of 1 but got +0
   Ã— Warehouse API Integration Tests > GET /api/warehouses > should search warehouses by name 8ms
     â†’ expected [] to have a length of 1 but got +0
   Ã— Warehouse API Integration Tests > GET /api/warehouses/[id] > should return warehouse by id 8ms
     â†’ expected undefined to be 'Test Warehouse' // Object.is equality
 âœ“ src/test/services/inventoryService.test.ts (11 tests) 8ms
 âœ“ src/test/components/titles/bulk-import.test.tsx (30 tests) 90ms
 âœ“ src/test/components/auth/user-menu.test.tsx (11 tests) 147ms
 â¯ src/test/components/titles/title-list.test.tsx (24 tests | 3 failed) 5604ms
   Ã— TitlesPage Component > Empty State > should display empty state when no titles found 1010ms
     â†’ Unable to find an element with the text: No titles found. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<header[39m
        [33mclass[39m=[32m"bg-white shadow"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitles[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
              [36m>[39m
                [0mManage your book catalog[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mImport Titles[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 4v16m8-8H4"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mCreate Title[0m
              [36m</button>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"user-menu"[39m
              [36m>[39m
                [0mUser Menu[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</header>[39m
      [36m<main[39m
        [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"lg:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"search"[39m
              [36m>[39m
                [0mSearch[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"search"[39m
                [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m""[39m
                [36m>[39m
                  [0mAll Formats[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"category"[39m
              [36m>[39m
                [0mCategory[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"category"[39m
                [33mplaceholder[39m=[32m"All categories"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"All publishers"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-gray-700"[39m
          [36m>[39m
            [0mShowing [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m of[0m
            [0m [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m titles[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"overflow-x-auto"[39m
          [36m>[39m
            [36m<table[39m
              [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
            [36m>[39m
              [36m<thead[39m
                [33mclass[39m=[32m"bg-gray-50"[39m
              [36m>[39m
                [36m<tr>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mTitle[0m
                      [36m<svg[39m
                        [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                        [33mfill[39m=[32m"currentColor"[39m
                        [33mviewBox[39m=[32m"0 0 20 20"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33mclip-rule[39m=[32m"evenodd"[39m
                          [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                          [33mfill-rule[39m=[32m"evenodd"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mAuthor[0m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mISBN[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mRRP[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"relative px-6 py-3"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"sr-only"[39m
                    [36m>[39m
                      [0mActions[0m
                    [36m</span>[39m
                  [36m</th>[39m
                [36m</tr>[39m
              [36m</thead>[39m
              [36m<tbody[39m
                [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book One[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Series[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJohn Doe[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9781234567890[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mPaperback[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m29.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mTest Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book Two[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJane Smith[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9789876543210[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mHardcover[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m39.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mAnother Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
              [36m</tbody>[39m
            [36m</table>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</main>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mTitles[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                [36m>[39m
                  [0mManage your book catalog[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mImport Titles[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M12 4v16m8-8H4"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCreate Title[0m
                [36m</button>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"user-menu"[39m
                [36m>[39m
                  [0mUser Menu[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"search"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"search"[39m
                  [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"format"[39m
                [36m>[39m
                  [0mFormat[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"format"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m""[39m
                  [36m>[39m
                    [0mAll Formats[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"HARDCOVER"[39m
                  [36m>[39m
                    [0mHardcover[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"PAPERBACK"[39m
                  [36m>[39m
                    [0mPaperback[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"DIGITAL"[39m
                  [36m>[39m
                    [0mDigital[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"AUDIOBOOK"[39m
                  [36m>[39m
                    [0mAudiobook[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"category"[39m
                [36m>[39m
                  [0mCategory[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"category"[39m
                  [33mplaceholder[39m=[32m"All categories"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"publisher"[39m
                [36m>[39m
                  [0mPublisher[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"publisher"[39m
                  [33mplaceholder[39m=[32m"All publishers"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-700"[39m
            [36m>[39m
              [0mShowing [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m of[0m
              [0m [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m titles[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<thead[39m
                  [33mclass[39m=[32m"bg-gray-50"[39m
                [36m>[39m
                  [36m<tr>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mTitle[0m
                        [36m<svg[39m
                          [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                          [33mfill[39m=[32m"currentColor"[39m
                          [33mviewBox[39m=[32m"0 0 20 20"[39m
                        [36m>[39m
                          [36m<path[39m
                            [33mclip-rule[39m=[32m"evenodd"[39m
                            [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                            [33mfill-rule[39m=[32m"evenodd"[39m
                          [36m/>[39m
                        [36m</svg>[39m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mAuthor[0m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mISBN[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mFormat[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mRRP[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mPublisher[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"relative px-6 py-3"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"sr-only"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</span>[39m
                    [36m</th>[39m
                  [36m</tr>[39m
                [36m</thead>[39m
                [36m<tbody[39m
                  [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book One[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mTest Series[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJohn Doe[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9781234567890[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mPaperback[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m29.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book Two[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJane Smith[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9789876543210[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mHardcover[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m39.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mAnother Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                [36m</tbody>[39m
              [36m</table>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
   âœ“ TitlesPage Component > Empty State > should show adjusted empty state message when filters are active 316ms
   Ã— TitlesPage Component > Error Handling > should display error message when fetch fails 1008ms
     â†’ Unable to find an element with the text: Error loading titles. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<header[39m
        [33mclass[39m=[32m"bg-white shadow"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitles[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
              [36m>[39m
                [0mManage your book catalog[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mImport Titles[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 4v16m8-8H4"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mCreate Title[0m
              [36m</button>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"user-menu"[39m
              [36m>[39m
                [0mUser Menu[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</header>[39m
      [36m<main[39m
        [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"lg:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"search"[39m
              [36m>[39m
                [0mSearch[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"search"[39m
                [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m""[39m
                [36m>[39m
                  [0mAll Formats[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"category"[39m
              [36m>[39m
                [0mCategory[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"category"[39m
                [33mplaceholder[39m=[32m"All categories"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"All publishers"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-gray-700"[39m
          [36m>[39m
            [0mShowing [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m of[0m
            [0m [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m titles[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"overflow-x-auto"[39m
          [36m>[39m
            [36m<table[39m
              [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
            [36m>[39m
              [36m<thead[39m
                [33mclass[39m=[32m"bg-gray-50"[39m
              [36m>[39m
                [36m<tr>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mTitle[0m
                      [36m<svg[39m
                        [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                        [33mfill[39m=[32m"currentColor"[39m
                        [33mviewBox[39m=[32m"0 0 20 20"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33mclip-rule[39m=[32m"evenodd"[39m
                          [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                          [33mfill-rule[39m=[32m"evenodd"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mAuthor[0m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mISBN[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mRRP[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"relative px-6 py-3"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"sr-only"[39m
                    [36m>[39m
                      [0mActions[0m
                    [36m</span>[39m
                  [36m</th>[39m
                [36m</tr>[39m
              [36m</thead>[39m
              [36m<tbody[39m
                [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book One[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Series[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJohn Doe[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9781234567890[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mPaperback[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m29.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mTest Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book Two[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJane Smith[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9789876543210[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mHardcover[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m39.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mAnother Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
              [36m</tbody>[39m
            [36m</table>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</main>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mTitles[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                [36m>[39m
                  [0mManage your book catalog[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mImport Titles[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M12 4v16m8-8H4"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCreate Title[0m
                [36m</button>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"user-menu"[39m
                [36m>[39m
                  [0mUser Menu[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"search"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"search"[39m
                  [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"format"[39m
                [36m>[39m
                  [0mFormat[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"format"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m""[39m
                  [36m>[39m
                    [0mAll Formats[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"HARDCOVER"[39m
                  [36m>[39m
                    [0mHardcover[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"PAPERBACK"[39m
                  [36m>[39m
                    [0mPaperback[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"DIGITAL"[39m
                  [36m>[39m
                    [0mDigital[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"AUDIOBOOK"[39m
                  [36m>[39m
                    [0mAudiobook[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"category"[39m
                [36m>[39m
                  [0mCategory[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"category"[39m
                  [33mplaceholder[39m=[32m"All categories"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"publisher"[39m
                [36m>[39m
                  [0mPublisher[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"publisher"[39m
                  [33mplaceholder[39m=[32m"All publishers"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-700"[39m
            [36m>[39m
              [0mShowing [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m of[0m
              [0m [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m titles[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<thead[39m
                  [33mclass[39m=[32m"bg-gray-50"[39m
                [36m>[39m
                  [36m<tr>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mTitle[0m
                        [36m<svg[39m
                          [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                          [33mfill[39m=[32m"currentColor"[39m
                          [33mviewBox[39m=[32m"0 0 20 20"[39m
                        [36m>[39m
                          [36m<path[39m
                            [33mclip-rule[39m=[32m"evenodd"[39m
                            [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                            [33mfill-rule[39m=[32m"evenodd"[39m
                          [36m/>[39m
                        [36m</svg>[39m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mAuthor[0m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mISBN[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mFormat[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mRRP[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mPublisher[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"relative px-6 py-3"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"sr-only"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</span>[39m
                    [36m</th>[39m
                  [36m</tr>[39m
                [36m</thead>[39m
                [36m<tbody[39m
                  [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book One[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mTest Series[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJohn Doe[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9781234567890[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mPaperback[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m29.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book Two[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJane Smith[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9789876543210[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mHardcover[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m39.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mAnother Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                [36m</tbody>[39m
              [36m</table>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
   Ã— TitlesPage Component > Pagination > should display pagination when multiple pages exist 3004ms
     â†’ Unable to find an element with the text: /Page.*1.*of.*3/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<header[39m
        [33mclass[39m=[32m"bg-white shadow"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitles[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
              [36m>[39m
                [0mManage your book catalog[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mImport Titles[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 4v16m8-8H4"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mCreate Title[0m
              [36m</button>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"user-menu"[39m
              [36m>[39m
                [0mUser Menu[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</header>[39m
      [36m<main[39m
        [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"lg:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"search"[39m
              [36m>[39m
                [0mSearch[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"search"[39m
                [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m""[39m
                [36m>[39m
                  [0mAll Formats[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"category"[39m
              [36m>[39m
                [0mCategory[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"category"[39m
                [33mplaceholder[39m=[32m"All categories"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"All publishers"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-gray-700"[39m
          [36m>[39m
            [0mShowing [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m of[0m
            [0m [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m titles[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"overflow-x-auto"[39m
          [36m>[39m
            [36m<table[39m
              [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
            [36m>[39m
              [36m<thead[39m
                [33mclass[39m=[32m"bg-gray-50"[39m
              [36m>[39m
                [36m<tr>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mTitle[0m
                      [36m<svg[39m
                        [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                        [33mfill[39m=[32m"currentColor"[39m
                        [33mviewBox[39m=[32m"0 0 20 20"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33mclip-rule[39m=[32m"evenodd"[39m
                          [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                          [33mfill-rule[39m=[32m"evenodd"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mAuthor[0m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mISBN[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mRRP[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"relative px-6 py-3"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"sr-only"[39m
                    [36m>[39m
                      [0mActions[0m
                    [36m</span>[39m
                  [36m</th>[39m
                [36m</tr>[39m
              [36m</thead>[39m
              [36m<tbody[39m
                [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book One[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Series[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJohn Doe[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9781234567890[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mPaperback[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m29.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mTest Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book Two[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJane Smith[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9789876543210[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mHardcover[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m39.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mAnother Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
              [36m</tbody>[39m
            [36m</table>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</main>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mTitles[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                [36m>[39m
                  [0mManage your book catalog[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mImport Titles[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M12 4v16m8-8H4"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCreate Title[0m
                [36m</button>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"user-menu"[39m
                [36m>[39m
                  [0mUser Menu[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"search"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"search"[39m
                  [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"format"[39m
                [36m>[39m
                  [0mFormat[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"format"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m""[39m
                  [36m>[39m
                    [0mAll Formats[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"HARDCOVER"[39m
                  [36m>[39m
                    [0mHardcover[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"PAPERBACK"[39m
                  [36m>[39m
                    [0mPaperback[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"DIGITAL"[39m
                  [36m>[39m
                    [0mDigital[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"AUDIOBOOK"[39m
                  [36m>[39m
                    [0mAudiobook[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"category"[39m
                [36m>[39m
                  [0mCategory[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"category"[39m
                  [33mplaceholder[39m=[32m"All categories"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"publisher"[39m
                [36m>[39m
                  [0mPublisher[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"publisher"[39m
                  [33mplaceholder[39m=[32m"All publishers"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-700"[39m
            [36m>[39m
              [0mShowing [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m of[0m
              [0m [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m titles[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<thead[39m
                  [33mclass[39m=[32m"bg-gray-50"[39m
                [36m>[39m
                  [36m<tr>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mTitle[0m
                        [36m<svg[39m
                          [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                          [33mfill[39m=[32m"currentColor"[39m
                          [33mviewBox[39m=[32m"0 0 20 20"[39m
                        [36m>[39m
                          [36m<path[39m
                            [33mclip-rule[39m=[32m"evenodd"[39m
                            [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                            [33mfill-rule[39m=[32m"evenodd"[39m
                          [36m/>[39m
                        [36m</svg>[39m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mAuthor[0m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mISBN[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mFormat[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mRRP[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mPublisher[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"relative px-6 py-3"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"sr-only"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</span>[39m
                    [36m</th>[39m
                  [36m</tr>[39m
                [36m</thead>[39m
                [36m<tbody[39m
                  [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book One[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mTest Series[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJohn Doe[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9781234567890[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mPaperback[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m29.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book Two[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJane Smith[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9789876543210[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mHardcover[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m39.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mAnother Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                [36m</tbody>[39m
              [36m</table>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > complete title edit flow: user updates title information successfully
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with price change creates price history
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with both RRP and unit cost changes creates complete history
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title without price change does not create price history
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with duplicate ISBN fails validation
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit non-existent title fails with clear error
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with invalid data fails validation
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > user can change ISBN to different valid ISBN
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

 â¯ src/test/e2e/title-edit-flow.test.ts (8 tests | 7 failed) 200ms
   Ã— E2E: Title Edit Flow > complete title edit flow: user updates title information successfully 77ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Edit Flow > edit title with price change creates price history 15ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Edit Flow > edit title with both RRP and unit cost changes creates complete history 14ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Edit Flow > edit title without price change does not create price history 18ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Edit Flow > edit title with duplicate ISBN fails validation 11ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Edit Flow > edit title with invalid data fails validation 17ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Edit Flow > user can change ISBN to different valid ISBN 13ms
     â†’ Title with ISBN 9780306406157 already exists
 âœ“ src/test/models/user.test.ts (12 tests) 211ms
 â¯ src/test/models/series.test.ts (15 tests | 2 failed) 285ms
   Ã— Series Model > Creation > should create a series with only name (description optional) 13ms
     â†’ expected 'A test series for unit testing' to be null
   Ã— Series Model > Deletion > should handle deletion with associated titles 31ms
     â†’ promise resolved "{ id: 39, â€¦(4) }" instead of rejecting
 âœ“ src/test/components/auth/access-denied.test.tsx (10 tests) 119ms
 âœ“ src/test/integration/clerk-authentication.test.ts (12 tests) 166ms
stdout | src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > complete title creation flow: user creates a new title successfully
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > title creation with duplicate ISBN should fail with clear error
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

 âœ“ src/test/components/auth/user-profile.test.tsx (8 tests) 116ms
stdout | src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > title creation with missing required fields should fail validation
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

stdout | src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > title creation normalizes ISBN before saving
prisma:query SELECT "public"."titles"."id", "public"."titles"."isbn", "public"."titles"."title", "public"."titles"."author", "public"."titles"."format"::text, "public"."titles"."rrp", "public"."titles"."unit_cost", "public"."titles"."page_count", "public"."titles"."publication_date", "public"."titles"."publisher", "public"."titles"."category", "public"."titles"."subcategory", "public"."titles"."dimensions", "public"."titles"."weight", "public"."titles"."binding_type", "public"."titles"."cover_finish", "public"."titles"."trade_discount", "public"."titles"."royalty_rate", "public"."titles"."royalty_threshold", "public"."titles"."print_run_size", "public"."titles"."reprint_threshold", "public"."titles"."low_stock_threshold", "public"."titles"."description", "public"."titles"."keywords", "public"."titles"."language", "public"."titles"."territory_rights", "public"."titles"."series_id", "public"."titles"."created_at", "public"."titles"."updated_at" FROM "public"."titles" WHERE ("public"."titles"."isbn" = $1 AND 1=1) LIMIT $2 OFFSET $3

 â¯ src/test/e2e/title-creation-flow.test.ts (5 tests | 4 failed) 167ms
   Ã— E2E: Title Creation Flow > complete title creation flow: user creates a new title successfully 100ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Creation Flow > title creation with duplicate ISBN should fail with clear error 20ms
     â†’ Title with ISBN 9780306406157 already exists
   Ã— E2E: Title Creation Flow > title creation with invalid ISBN should fail validation 14ms
     â†’ expected [Function] to throw error including 'Invalid ISBN-13 checksum' but got 'Invalid ISBN format: 9780306406158'
   Ã— E2E: Title Creation Flow > title creation normalizes ISBN before saving 10ms
     â†’ Title with ISBN 9780306406157 already exists
 âœ“ src/test/components/auth/sign-in-page.test.tsx (7 tests) 87ms
 âœ“ src/test/components/auth/sign-up-page.test.tsx (7 tests) 101ms
 â¯ src/test/integration/inventory.test.ts (0 test)

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Suites 4 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  src/test/api/titles-bulk.integration.test.ts > Title Bulk Operations API Integration Tests
PrismaClientKnownRequestError: 
Invalid `prisma.series.create()` invocation:


Unique constraint failed on the fields: (`name`)
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/api/titles-bulk.integration.test.ts:22:20
     20|   beforeAll(async () => {
     21|     // Create test series
     22|     const series = await prisma.series.create({
       |                    ^
     23|       data: {
     24|         name: 'Bulk API Test Series',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/189]âŽ¯

 FAIL  src/test/api/titles-bulk.integration.test.ts > Title Bulk Operations API Integration Tests
PrismaClientKnownRequestError: 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `price_history_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/api/titles-bulk.integration.test.ts:33:5
     31|   afterAll(async () => {
     32|     // Cleanup
     33|     await prisma.title.deleteMany({
       |     ^
     34|       where: {
     35|         isbn: {

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/189]âŽ¯

 FAIL  src/test/api/titles.integration.test.ts > Title API Integration Tests
PrismaClientKnownRequestError: 
Invalid `prisma.series.create()` invocation:


Unique constraint failed on the fields: (`name`)
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/api/titles.integration.test.ts:22:20
     20|   beforeAll(async () => {
     21|     // Create test series
     22|     const series = await prisma.series.create({
       |                    ^
     23|       data: {
     24|         name: 'API Test Series',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/189]âŽ¯

 FAIL  src/test/api/titles.integration.test.ts > Title API Integration Tests
PrismaClientKnownRequestError: 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `price_history_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/api/titles.integration.test.ts:33:5
     31|   afterAll(async () => {
     32|     // Cleanup
     33|     await prisma.title.deleteMany({
       |     ^
     34|       where: {
     35|         isbn: {

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/189]âŽ¯

 FAIL  src/test/integration/inventory.test.ts [ src/test/integration/inventory.test.ts ]
Error: Playwright Test did not expect test.describe() to be called here.
Most common reasons include:
- You are calling test.describe() in a configuration file.
- You are calling test.describe() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.
 â¯ TestTypeImpl._currentSuite node_modules/playwright/lib/common/testType.js:74:13
 â¯ TestTypeImpl._describe node_modules/playwright/lib/common/testType.js:114:24
 â¯ Function.describe node_modules/playwright/lib/transform/transform.js:275:12
 â¯ src/test/integration/inventory.test.ts:4:6
      2| import { test, expect } from '@playwright/test';
      3| 
      4| test.describe('Inventory API', () => {
       |      ^
      5|   test('GET /api/inventory/dashboard should return inventory grouped bâ€¦
      6|     const response = await request.get('/api/inventory/dashboard');

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/189]âŽ¯

 FAIL  src/test/services/titleService.integration.test.ts > TitleService Integration Tests
PrismaClientKnownRequestError: 
Invalid `prisma.series.create()` invocation:


Unique constraint failed on the fields: (`name`)
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/services/titleService.integration.test.ts:21:20
     19|   beforeAll(async () => {
     20|     // Create test series for relationship testing
     21|     const series = await prisma.series.create({
       |                    ^
     22|       data: {
     23|         name: 'Test Series for Titles',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/189]âŽ¯

 FAIL  src/test/services/titleService.integration.test.ts > TitleService Integration Tests
PrismaClientKnownRequestError: 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `price_history_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/services/titleService.integration.test.ts:32:5
     30|   afterAll(async () => {
     31|     // Cleanup
     32|     await prisma.title.deleteMany({
       |     ^
     33|       where: {
     34|         isbn: {

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/189]âŽ¯

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯ Failed Tests 182 âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯

 FAIL  src/test/api/warehouses.integration.test.ts > Warehouse API Integration Tests > GET /api/warehouses > should filter warehouses by type
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 â¯ src/test/api/warehouses.integration.test.ts:62:24
     60|       })
     61| 
     62|       expect(physical).toHaveLength(1)
       |                        ^
     63|       expect(virtual).toHaveLength(1)
     64|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/189]âŽ¯

 FAIL  src/test/api/warehouses.integration.test.ts > Warehouse API Integration Tests > GET /api/warehouses > should search warehouses by name
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 â¯ src/test/api/warehouses.integration.test.ts:80:23
     78|       })
     79| 
     80|       expect(results).toHaveLength(1)
       |                       ^
     81|       expect(results[0].name).toBe('London Warehouse')
     82|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/189]âŽ¯

 FAIL  src/test/api/warehouses.integration.test.ts > Warehouse API Integration Tests > GET /api/warehouses/[id] > should return warehouse by id
AssertionError: expected undefined to be 'Test Warehouse' // Object.is equality

- Expected: 
"Test Warehouse"

+ Received: 
undefined

 â¯ src/test/api/warehouses.integration.test.ts:147:27
    145| 
    146|       expect(found).toBeDefined()
    147|       expect(found?.name).toBe('Test Warehouse')
       |                           ^
    148|       expect(found?.code).toBe('TST')
    149|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/189]âŽ¯

 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Complete Authorization Flow > should handle user registration to first authorized action
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Complete Authorization Flow > should handle role changes and permission updates
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Complete Authorization Flow > should handle concurrent role assignments
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Resource Access Patterns > should enforce resource-level permissions correctly
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Resource Access Patterns > should provide accurate accessible resources map
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Hierarchical Permission Testing > should handle wildcard permissions correctly
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Hierarchical Permission Testing > should respect permission boundaries for non-admin roles
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Multiple User Scenarios > should handle different users with different permissions
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Performance and Scale Testing > should handle permission checks efficiently with multiple roles
 FAIL  src/test/integration/authorization-flow.test.ts > Authorization Flow Integration > Performance and Scale Testing > should handle many users with concurrent permission checks
TypeError: roleService.create is not a function
 â¯ src/test/integration/authorization-flow.test.ts:18:35
     16| 
     17|     // Create test roles
     18|     adminRole = await roleService.create({
       |                                   ^
     19|       name: 'admin',
     20|       description: 'System Administrator',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/189]âŽ¯

 FAIL  src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should create new user in database
AssertionError: expected { â€¦(10) } to match object { clerk_id: 'clerk_new_user', â€¦(4) }
(9 matching properties omitted from actual)

- Expected
+ Received

  Object {
-   "clerk_id": "clerk_new_user",
    "email": "newuser@example.com",
-   "first_name": "New",
-   "is_active": true,
-   "last_name": "User",
  }

 â¯ src/test/lib/auth.test.ts:161:22
    159|       const result = await sync_user_to_database(clerkUser)
    160| 
    161|       expect(result).toMatchObject({
       |                      ^
    162|         clerk_id: 'clerk_new_user',
    163|         email: 'newuser@example.com',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/189]âŽ¯

 FAIL  src/test/lib/auth.test.ts > Auth Library > sync_user_to_database > should update existing user in database
AssertionError: expected { â€¦(10) } to match object { â€¦(4) }
(9 matching properties omitted from actual)

- Expected
+ Received

  Object {
-   "clerk_id": "clerk_existing_user",
    "email": "updated@example.com",
-   "first_name": "Updated",
-   "last_name": "Updated",
  }

 â¯ src/test/lib/auth.test.ts:191:22
    189|       const result = await sync_user_to_database(updatedClerkUser)
    190| 
    191|       expect(result).toMatchObject({
       |                      ^
    192|         clerk_id: 'clerk_existing_user',
    193|         email: 'updated@example.com',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/189]âŽ¯

 FAIL  src/test/lib/auth.test.ts > Auth Library > validate_api_auth > should return user info for authenticated request
Error: Unauthorized
 â¯ Module.validate_api_auth src/lib/auth.ts:235:11
    233|   } catch (error) {
    234|     console.error('Error in validate_api_auth:', error);
    235|     throw new Error('Unauthorized')
       |           ^
    236|   }
    237| }
 â¯ src/test/lib/auth.test.ts:241:22

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/189]âŽ¯

 FAIL  src/test/lib/auth.test.ts > Auth Library > validate_api_permission > should return user info when user has permission
Error: Unauthorized
 â¯ validate_api_auth src/lib/auth.ts:235:11
    233|   } catch (error) {
    234|     console.error('Error in validate_api_auth:', error);
    235|     throw new Error('Unauthorized')
       |           ^
    236|   }
    237| }
 â¯ Module.validate_api_permission src/lib/auth.ts:246:21
 â¯ src/test/lib/auth.test.ts:279:22

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/189]âŽ¯

 FAIL  src/test/lib/auth.test.ts > Auth Library > validate_api_permission > should throw error when user lacks permission
AssertionError: expected [Function] to throw error including 'Forbidden' but got 'Unauthorized'

Expected: "Forbidden"
Received: "Unauthorized"

 â¯ src/test/lib/auth.test.ts:304:7
    302|       const mockRequest = new NextRequest('http://localhost/api/test')
    303| 
    304|       await expect(
       |       ^
    305|         validate_api_permission(mockRequest, 'title:create')
    306|       ).rejects.toThrow('Forbidden')

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/189]âŽ¯

 FAIL  src/test/lib/auth.test.ts > Auth Library > create_audit_log > should create audit log entry
PrismaClientValidationError: 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    user_id: NaN,
    ~~~~~~~
    action: "user:login",
    details: {
      timestamp: new Date("2025-11-01T23:38:37.299Z")
    },
    ip_address: null,
    user_agent: null,
    timestamp: new Date("2025-11-01T23:38:37.299Z"),
?   id?: String,
?   resource?: String | Null,
?   resourceId?: String | Null,
?   ipAddress?: String | Null,
?   userAgent?: String | Null,
?   user?: UserCreateNestedOneWithoutAuditLogsInput
  }
}

Unknown argument `user_id`. Did you mean `user`? Available options are marked with ?.
 â¯ throwValidationException node_modules/@prisma/client/src/runtime/core/errorRendering/throwValidationException.ts:45:9
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:202:7
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ Module.create_audit_log src/lib/auth.ts:270:3
    268|   request?: NextRequest
    269| ) {
    270|   await prisma.auditLog.create({
       |   ^
    271|     data: {
    272|       user_id,
 â¯ src/test/lib/auth.test.ts:321:7

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/189]âŽ¯

 FAIL  src/test/lib/auth.test.ts > Auth Library > create_audit_log > should capture IP address and user agent from request
PrismaClientValidationError: 
Invalid `prisma.auditLog.create()` invocation:

{
  data: {
    user_id: NaN,
    ~~~~~~~
    action: "user:action",
    details: {
      data: "test"
    },
    ip_address: "192.168.1.100",
    user_agent: "Test Browser 1.0",
    timestamp: new Date("2025-11-01T23:38:37.321Z"),
?   id?: String,
?   resource?: String | Null,
?   resourceId?: String | Null,
?   ipAddress?: String | Null,
?   userAgent?: String | Null,
?   user?: UserCreateNestedOneWithoutAuditLogsInput
  }
}

Unknown argument `user_id`. Did you mean `user`? Available options are marked with ?.
 â¯ throwValidationException node_modules/@prisma/client/src/runtime/core/errorRendering/throwValidationException.ts:45:9
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:202:7
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ Module.create_audit_log src/lib/auth.ts:270:3
    268|   request?: NextRequest
    269| ) {
    270|   await prisma.auditLog.create({
       |   ^
    271|     data: {
    272|       user_id,
 â¯ src/test/lib/auth.test.ts:355:7

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/189]âŽ¯

 FAIL  src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user successfully imports multiple valid titles
AssertionError: expected +0 to be 3 // Object.is equality

- Expected
+ Received

- 3
+ 0

 â¯ src/test/e2e/title-bulk-import-flow.test.ts:62:28
     60| 
     61|     // Step 4: Verify success summary
     62|     expect(result.success).toBe(3)
       |                            ^
     63|     expect(result.failed).toBe(0)
     64|     expect(result.errors).toHaveLength(0)

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/189]âŽ¯

 FAIL  src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports with partial failures shows detailed error report
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

 â¯ src/test/e2e/title-bulk-import-flow.test.ts:124:28
    122| 
    123|     // Step 3: Verify partial success summary
    124|     expect(result.success).toBe(2)
       |                            ^
    125|     expect(result.failed).toBe(2)
    126|     expect(result.errors).toHaveLength(2)

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/189]âŽ¯

 FAIL  src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user can download error report after failed imports
AssertionError: expected [ { row: 1, â€¦(2) }, { row: 2, â€¦(2) } ] to have a length of 1 but got 2

- Expected
+ Received

- 1
+ 2

 â¯ src/test/e2e/title-bulk-import-flow.test.ts:168:27
    166| 
    167|     // Step 2: Verify error report structure for CSV export
    168|     expect(result.errors).toHaveLength(1)
       |                           ^
    169|     expect(result.errors[0]).toMatchObject({
    170|       isbn: '9780306406158',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/189]âŽ¯

 FAIL  src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user cannot import duplicate ISBNs within same batch
AssertionError: expected +0 to be 1 // Object.is equality

- Expected
+ Received

- 1
+ 0

 â¯ src/test/e2e/title-bulk-import-flow.test.ts:212:28
    210| 
    211|     // Step 3: Verify first succeeds, second fails
    212|     expect(result.success).toBe(1)
       |                            ^
    213|     expect(result.failed).toBe(1)
    214| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/189]âŽ¯

 FAIL  src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user cannot import ISBN that already exists in database
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-bulk-import-flow.test.ts:222:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/189]âŽ¯

 FAIL  src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user imports large batch of titles successfully
AssertionError: expected 0 to be greater than 0
 â¯ src/test/e2e/title-bulk-import-flow.test.ts:274:28
    272|     // Step 3: Verify all successful (may have some invalid ISBNs due â€¦
    273|     // Note: Some generated ISBNs may be invalid, that's expected
    274|     expect(result.success).toBeGreaterThan(0)
       |                            ^
    275|     expect(result.success + result.failed).toBe(50)
    276| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/189]âŽ¯

 FAIL  src/test/e2e/title-bulk-import-flow.test.ts > E2E: Title Bulk Import Flow > user can retry failed imports after fixing errors
AssertionError: expected 2 to be 1 // Object.is equality

- Expected
+ Received

- 1
+ 2

 â¯ src/test/e2e/title-bulk-import-flow.test.ts:307:33
    305| 
    306|     const first_result = await titleService.bulkImport(first_attempt)
    307|     expect(first_result.failed).toBe(1)
       |                                 ^
    308| 
    309|     // Step 2: User downloads error report and fixes ISBN

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[25/189]âŽ¯

 FAIL  src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > complete title creation flow: user creates a new title successfully
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-creation-flow.test.ts:39:27

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[26/189]âŽ¯

 FAIL  src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > title creation with duplicate ISBN should fail with clear error
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-creation-flow.test.ts:76:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[27/189]âŽ¯

 FAIL  src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > title creation with invalid ISBN should fail validation
AssertionError: expected [Function] to throw error including 'Invalid ISBN-13 checksum' but got 'Invalid ISBN format: 9780306406158'

Expected: "Invalid ISBN-13 checksum"
Received: "Invalid ISBN format: 9780306406158"

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[28/189]âŽ¯

 FAIL  src/test/e2e/title-creation-flow.test.ts > E2E: Title Creation Flow > title creation normalizes ISBN before saving
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-creation-flow.test.ts:128:27

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[29/189]âŽ¯

 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user can delete title without inventory
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with inventory
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user can delete title after inventory depleted
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with inventory across multiple warehouses
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with reserved inventory
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete title with committed inventory
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > delete confirmation dialog shows inventory warning
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user can delete title with zero inventory in all warehouses
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > deletion cascades to price history
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > user cannot delete non-existent title
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > bulk delete not allowed if any title has inventory
 FAIL  src/test/e2e/title-delete-validation-flow.test.ts > E2E: Title Delete Validation Flow > delete validation message is clear and helpful
PrismaClientKnownRequestError: 
Invalid `prisma.warehouse.create()` invocation:


Unique constraint failed on the fields: (`code`)
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/e2e/title-delete-validation-flow.test.ts:19:23
     17| 
     18|     // Create a test warehouse for inventory tests
     19|     const warehouse = await prisma.warehouse.create({
       |                       ^
     20|       data: {
     21|         name: 'Test Warehouse',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[30/189]âŽ¯

 FAIL  src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > complete title edit flow: user updates title information successfully
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-edit-flow.test.ts:23:27

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[31/189]âŽ¯

 FAIL  src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with price change creates price history
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-edit-flow.test.ts:66:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[32/189]âŽ¯

 FAIL  src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with both RRP and unit cost changes creates complete history
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-edit-flow.test.ts:106:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[33/189]âŽ¯

 FAIL  src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title without price change does not create price history
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-edit-flow.test.ts:134:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[34/189]âŽ¯

 FAIL  src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with duplicate ISBN fails validation
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-edit-flow.test.ts:158:20

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[35/189]âŽ¯

 FAIL  src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > edit title with invalid data fails validation
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-edit-flow.test.ts:195:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[36/189]âŽ¯

 FAIL  src/test/e2e/title-edit-flow.test.ts > E2E: Title Edit Flow > user can change ISBN to different valid ISBN
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-edit-flow.test.ts:214:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[37/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history created on title creation
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:23:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[38/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history updated when RRP changes
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:52:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history updated when unit cost changes
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:93:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[40/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history updated when both prices change
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:120:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[41/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > no price history created when prices unchanged
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:148:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[42/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > multiple price changes create complete history timeline
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:172:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[43/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > bulk price update creates history for all titles
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:239:20

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[44/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > user can view full price history with all details
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:297:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[45/189]âŽ¯

 FAIL  src/test/e2e/title-price-history-flow.test.ts > E2E: Price History Tracking Flow > price history preserved when title deleted
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-price-history-flow.test.ts:345:19

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[46/189]âŽ¯

 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can see all titles without filters
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can search titles by title text
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can search titles by author name
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can search titles by ISBN
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can filter titles by format
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can filter titles by category
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can filter titles by publisher
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can combine search with format filter
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can combine multiple filters
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can sort titles by title ascending
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can sort titles by title descending
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can paginate through results
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > search with no results returns empty list
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > case-insensitive search works correctly
 FAIL  src/test/e2e/title-search-filter-flow.test.ts > E2E: Title Search and Filter Flow > user can clear all filters and see all results again
Error: Title with ISBN 9780306406157 already exists
 â¯ TitleService.create src/services/titleService.ts:110:13
    108| 
    109|     if (existing) {
    110|       throw new Error(`Title with ISBN ${isbn13} already exists`)
       |             ^
    111|     }
    112| 
 â¯ src/test/e2e/title-search-filter-flow.test.ts:16:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[47/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > complete warehouse creation flow: admin creates a new physical warehouse successfully
Error: Warehouse with code UK-LON-01 already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:45:30

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[48/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse creation with duplicate code should fail with clear error
Error: Warehouse with code UK-LON already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:79:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[49/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse edit flow: admin updates warehouse details successfully
Error: Warehouse with code US-NYC already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:99:23

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[50/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse status management flow: admin activates and deactivates warehouse
Error: Warehouse with code TEST-01 already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:136:23

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[51/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse list with search and filters flow: user searches and filters warehouses
Error: Warehouse with code UK-LON already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:163:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[52/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse pagination flow: user navigates through pages
Error: Warehouse with code WH-001 already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:243:7

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[53/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse creation with virtual type: admin creates online fulfillment center
Error: Warehouse with code ONLINE already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:273:30

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[54/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse deletion prevention: warehouse with inventory cannot be deleted
Error: Warehouse with code TEST-DEL already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:293:23

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[55/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse code case sensitivity: codes are stored as provided
Error: Warehouse with code UK-TEST already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:348:23

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[56/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse maintenance status flow: admin sets warehouse to maintenance mode
Error: Warehouse with code MAINT-TEST already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:366:23

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[57/189]âŽ¯

 FAIL  src/test/e2e/warehouse-management-flow.test.ts > E2E: Warehouse Management Flow > warehouse third-party type: admin creates third-party fulfillment warehouse
Error: Warehouse with code AMZN-FBA already exists
 â¯ WarehouseService.create src/services/warehouseService.ts:63:17
     61|       if (error instanceof Prisma.PrismaClientKnownRequestError) {
     62|         if (error.code === 'P2002') {
     63|           throw new Error(`Warehouse with code ${data.code} already exâ€¦
       |                 ^
     64|         }
     65|       }
 â¯ src/test/e2e/warehouse-management-flow.test.ts:392:33

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[58/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should allow authenticated requests to proceed
AssertionError: expected "spy" to be called with arguments: [ â€¦(1) ]

Received: 



Number of calls: 0

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:42:27
     40|       const response = await protectedHandler(mockRequest)
     41| 
     42|       expect(mockHandler).toHaveBeenCalledWith(mockRequest)
       |                           ^
     43|       expect(response.status).toBe(200)
     44|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[59/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Authentication Middleware > should add user context to request
AssertionError: expected "spy" to be called at least once
 â¯ src/test/middleware/apiAuthMiddleware.test.ts:109:27
    107|       await protectedHandler(mockRequest)
    108| 
    109|       expect(mockHandler).toHaveBeenCalled()
       |                           ^
    110|     })
    111|   })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[60/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should allow requests with required permission
AssertionError: expected "spy" to be called with arguments: [ â€¦(1) ]

Received: 



Number of calls: 0

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:135:27
    133|       const response = await protectedHandler(mockRequest)
    134| 
    135|       expect(mockHandler).toHaveBeenCalledWith(mockRequest)
       |                           ^
    136|       expect(response.status).toBe(200)
    137|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[61/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should reject requests without required permission
AssertionError: expected 401 to be 403 // Object.is equality

- Expected
+ Received

- 403
+ 401

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:159:31
    157| 
    158|       expect(mockHandler).not.toHaveBeenCalled()
    159|       expect(response.status).toBe(403)
       |                               ^
    160| 
    161|       const data = await response.json()

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[62/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Permission Middleware > should allow requests with any of multiple required permissions
AssertionError: expected "spy" to be called with arguments: [ â€¦(1) ]

Received: 



Number of calls: 0

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:189:27
    187|       const response = await protectedHandler(mockRequest)
    188| 
    189|       expect(mockHandler).toHaveBeenCalledWith(mockRequest)
       |                           ^
    190|       expect(response.status).toBe(200)
    191|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[63/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Audit Logging Middleware > should create audit log for protected requests
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:225:25
    223|       })
    224| 
    225|       expect(auditLogs).toHaveLength(1)
       |                         ^
    226|       expect(auditLogs[0]).toMatchObject({
    227|         action: 'title:create',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[64/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Audit Logging Middleware > should include request details in audit log
AssertionError: expected undefined to match object { action: 'inventory:update', â€¦(4) }

- Expected: 
Object {
  "action": "inventory:update",
  "ip_address": "192.168.1.50",
  "resource": "inventory",
  "resource_id": "123",
  "user_agent": "Test Client 2.0",
}

+ Received: 
undefined

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:266:28
    264|       })
    265| 
    266|       expect(auditLogs[0]).toMatchObject({
       |                            ^
    267|         action: 'inventory:update',
    268|         resource: 'inventory',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[65/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Error Handling > should handle middleware errors gracefully
AssertionError: expected 401 to be 500 // Object.is equality

- Expected
+ Received

- 500
+ 401

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:294:31
    292|       const response = await protectedHandler(mockRequest)
    293| 
    294|       expect(response.status).toBe(500)
       |                               ^
    295| 
    296|       const data = await response.json()

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[66/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Error Handling > should handle database connection errors
AssertionError: expected 401 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 401

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:329:31
    327|       // Should still complete successfully even if audit logging fails
    328|       const response = await auditingHandler(mockRequest)
    329|       expect(response.status).toBe(200)
       |                               ^
    330| 
    331|       // Restore original function

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[67/189]âŽ¯

 FAIL  src/test/middleware/apiAuthMiddleware.test.ts > API Auth Middleware > Performance Tests > should handle concurrent requests efficiently
AssertionError: expected false to be true // Object.is equality

- Expected
+ Received

- true
+ false

 â¯ src/test/middleware/apiAuthMiddleware.test.ts:390:54
    388|       const duration = endTime - startTime
    389|       expect(duration).toBeLessThan(500)
    390|       expect(responses.every(r => r.status === 200)).toBe(true)
       |                                                      ^
    391|     })
    392|   })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[68/189]âŽ¯

 FAIL  src/test/models/audit-log.test.ts > AuditLog Model > Queries > should find logs by user
AssertionError: expected [ { â€¦(9) } ] to have a length of 2 but got 1

- Expected
+ Received

- 2
+ 1

 â¯ src/test/models/audit-log.test.ts:290:24
    288|       })
    289| 
    290|       expect(userLogs).toHaveLength(2)
       |                        ^
    291|     })
    292| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[69/189]âŽ¯

 FAIL  src/test/models/audit-log.test.ts > AuditLog Model > Relationships > should include user information
AssertionError: expected undefined to be 'audit@example.com' // Object.is equality

- Expected: 
"audit@example.com"

+ Received: 
undefined

 â¯ src/test/models/audit-log.test.ts:402:39
    400|       })
    401| 
    402|       expect(logWithUser?.user.email).toBe(testUser.email)
       |                                       ^
    403|       expect(logWithUser?.user.clerkId).toBe(testUser.clerkId)
    404|     })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[70/189]âŽ¯

 FAIL  src/test/models/audit-log.test.ts > AuditLog Model > Complex Details > should store array data in details
PrismaClientKnownRequestError: 
Invalid `prisma.auditLog.create()` invocation:


Foreign key constraint violated on the constraint: `audit_logs_user_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/audit-log.test.ts:467:24
    465|       }
    466| 
    467|       const auditLog = await testDb.auditLog.create({
       |                        ^
    468|         data: {
    469|           userId: testUser.id,

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[71/189]âŽ¯

 FAIL  src/test/models/inventory-tracking-schema.test.ts > Inventory Tracking Schema Extensions > StockMovement.createdBy > should link to user for audit trail
AssertionError: expected undefined to be 'Admin' // Object.is equality

- Expected: 
"Admin"

+ Received: 
undefined

 â¯ src/test/models/inventory-tracking-schema.test.ts:263:52
    261|       })
    262| 
    263|       expect(movementWithUser?.creator?.firstName).toBe('Admin')
       |                                                    ^
    264|       expect(movementWithUser?.creator?.lastName).toBe('User')
    265|       expect(movementWithUser?.creator?.email).toBe('admin@example.comâ€¦

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[72/189]âŽ¯

 FAIL  src/test/models/inventory-tracking-schema.test.ts > Inventory Tracking Schema Extensions > StockMovement.createdBy > should support filtering movements by creator
PrismaClientKnownRequestError: 
Invalid `prisma.stockMovement.create()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/inventory-tracking-schema.test.ts:306:7
    304|       const warehouse = await createTestWarehouse({ code: 'FLT' })
    305| 
    306|       await testDb.stockMovement.create({
       |       ^
    307|         data: {
    308|           titleId: title.id,

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[73/189]âŽ¯

 FAIL  src/test/models/inventory-tracking-schema.test.ts > Inventory Tracking Schema Extensions > Index performance verification > should have index on createdBy for audit queries
AssertionError: expected [ â€¦(2) ] to have a length of 10 but got 2

- Expected
+ Received

- 10
+ 2

 â¯ src/test/models/inventory-tracking-schema.test.ts:451:25
    449|       })
    450| 
    451|       expect(movements).toHaveLength(10)
       |                         ^
    452|     })
    453|   })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[74/189]âŽ¯

 FAIL  src/test/models/inventory.test.ts > Inventory Model > Relationships > should handle cascade deletion from title
PrismaClientKnownRequestError: 
Invalid `prisma.title.delete()` invocation:


Foreign key constraint violated on the constraint: `inventory_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/inventory.test.ts:248:7
    246| 
    247|       // Deleting title should cascade delete inventory
    248|       await testDb.title.delete({
       |       ^
    249|         where: { id: title.id }
    250|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[75/189]âŽ¯

 FAIL  src/test/models/inventory.test.ts > Inventory Model > Relationships > should handle cascade deletion from warehouse
PrismaClientKnownRequestError: 
Invalid `prisma.warehouse.delete()` invocation:


Foreign key constraint violated on the constraint: `inventory_warehouse_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/inventory.test.ts:272:7
    270| 
    271|       // Deleting warehouse should cascade delete inventory
    272|       await testDb.warehouse.delete({
       |       ^
    273|         where: { id: warehouse.id }
    274|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[76/189]âŽ¯

 FAIL  src/test/models/printer.test.ts > Printer Model > Validation > should enforce field length constraints
AssertionError: promise resolved "{ id: 40, â€¦(11) }" instead of rejecting

- Expected
+ Received

- [Error: rejected promise]
+ Object {
+   "code": null,
+   "contactEmail": "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa@test.com",
+   "contactPhone": null,
+   "createdAt": 2025-11-01T23:38:35.120Z,
+   "id": 40,
+   "isActive": true,
+   "location": null,
+   "name": "Test Printer 1762040315119-0.9026702207342465",
+   "notes": null,
+   "specialties": null,
+   "updatedAt": 2025-11-01T23:38:35.120Z,
+   "website": null,
+ }

 â¯ src/test/models/printer.test.ts:131:7
    129|       await expect(
    130|         createTestPrinter({ contactEmail: longEmail })
    131|       ).rejects.toThrow()
       |       ^
    132| 
    133|       // Contact phone too long (50 char limit)

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[77/189]âŽ¯

 FAIL  src/test/models/series.test.ts > Series Model > Creation > should create a series with only name (description optional)
AssertionError: expected 'A test series for unit testing' to be null

- Expected: 
null

+ Received: 
"A test series for unit testing"

 â¯ src/test/models/series.test.ts:36:34
     34| 
     35|       expect(series.name).toBe('Minimalist Series')
     36|       expect(series.description).toBeNull()
       |                                  ^
     37|     })
     38| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[78/189]âŽ¯

 FAIL  src/test/models/series.test.ts > Series Model > Deletion > should handle deletion with associated titles
AssertionError: promise resolved "{ id: 39, â€¦(4) }" instead of rejecting

- Expected
+ Received

- [Error: rejected promise]
+ Object {
+   "createdAt": 2025-11-01T23:38:39.841Z,
+   "description": "A test series for unit testing",
+   "id": 39,
+   "name": "Series with Books",
+   "updatedAt": 2025-11-01T23:38:39.841Z,
+ }

 â¯ src/test/models/series.test.ts:215:7
    213|       await expect(
    214|         testDb.series.delete({ where: { id: series.id } })
    215|       ).rejects.toThrow()
       |       ^
    216|     })
    217|   })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[79/189]âŽ¯

 FAIL  src/test/models/stock-movement.test.ts > StockMovement Model > Creation > should create print received movement with printer name
PrismaClientValidationError: 
Invalid `prisma.stockMovement.create()` invocation:

{
  data: {
    titleId: 195,
    warehouseId: 343,
    movementType: "PRINT_RECEIVED",
    quantity: 4000,
    movementDate: new Date("2024-01-10T00:00:00.000Z"),
    printerName: "Lightning Source UK",
    ~~~~~~~~~~~
    referenceNumber: "PRINT-2024-0115",
?   id?: Int,
?   rrpAtTime?: Decimal | Null,
?   unitCostAtTime?: Decimal | Null,
?   tradeDiscountAtTime?: Decimal | Null,
?   sourceWarehouseId?: Int | Null,
?   destinationWarehouseId?: Int | Null,
?   printerId?: Int | Null,
?   notes?: String | Null,
?   createdBy?: String | Null,
?   createdAt?: DateTime,
?   updatedAt?: DateTime
  }
}

Unknown argument `printerName`. Available options are marked with ?.
 â¯ throwValidationException node_modules/@prisma/client/src/runtime/core/errorRendering/throwValidationException.ts:45:9
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:202:7
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/stock-movement.test.ts:70:24
     68|       const warehouse = await createTestWarehouse({ code: 'PRT' })
     69| 
     70|       const movement = await testDb.stockMovement.create({
       |                        ^
     71|         data: {
     72|           titleId: title.id,

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[80/189]âŽ¯

 FAIL  src/test/models/stock-movement.test.ts > StockMovement Model > Relationships > should handle cascade deletion from title
PrismaClientKnownRequestError: 
Invalid `prisma.title.delete()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/stock-movement.test.ts:339:7
    337|       })
    338| 
    339|       await testDb.title.delete({
       |       ^
    340|         where: { id: title.id }
    341|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[81/189]âŽ¯

 FAIL  src/test/models/stock-movement.test.ts > StockMovement Model > Business Logic Scenarios > should support reprint workflow tracking
PrismaClientValidationError: 
Invalid `prisma.stockMovement.create()` invocation:

{
  data: {
    titleId: 212,
    warehouseId: 364,
    movementType: "PRINT_RECEIVED",
    quantity: 3000,
    movementDate: new Date("2024-01-01T00:00:00.000Z"),
    printerName: "Lightning Source UK",
    ~~~~~~~~~~~
    referenceNumber: "INITIAL-PRINT-001",
?   id?: Int,
?   rrpAtTime?: Decimal | Null,
?   unitCostAtTime?: Decimal | Null,
?   tradeDiscountAtTime?: Decimal | Null,
?   sourceWarehouseId?: Int | Null,
?   destinationWarehouseId?: Int | Null,
?   printerId?: Int | Null,
?   notes?: String | Null,
?   createdBy?: String | Null,
?   createdAt?: DateTime,
?   updatedAt?: DateTime
  }
}

Unknown argument `printerName`. Available options are marked with ?.
 â¯ throwValidationException node_modules/@prisma/client/src/runtime/core/errorRendering/throwValidationException.ts:45:9
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:202:7
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/stock-movement.test.ts:671:7
    669| 
    670|       // Initial print run
    671|       await testDb.stockMovement.create({
       |       ^
    672|         data: {
    673|           titleId: title.id,

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[82/189]âŽ¯

 FAIL  src/test/models/title.test.ts > Title Model > Creation > should create title with required fields only
AssertionError: expected 19.99 to deeply equal 19.99

Compared values have no visual difference.

 â¯ src/test/models/title.test.ts:32:25
     30|         format: 'PAPERBACK'
     31|       })
     32|       expect(title.rrp).toEqual(new Decimal('19.99'))
       |                         ^
     33|       expect(title.unitCost).toEqual(new Decimal('5.50'))
     34|       expect(title.id).toBeDefined()

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[83/189]âŽ¯

 FAIL  src/test/models/title.test.ts > Title Model > Creation > should create title with all publishing metadata
PrismaClientKnownRequestError: 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `inventory_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ Module.cleanDatabase src/test/utils/test-db.ts:33:3
     31|   
     32|   // 6. Delete titles (references series)
     33|   await testDb.title.deleteMany()
       |   ^
     34|   
     35|   // 7. Delete independent tables
 â¯ src/test/models/title.test.ts:7:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[84/189]âŽ¯

 FAIL  src/test/models/title.test.ts > Title Model > Validation > should enforce field length constraints
 FAIL  src/test/models/title.test.ts > Title Model > Queries > should order titles by various fields
 FAIL  src/test/models/title.test.ts > Title Model > Updates > should update publishing metadata
 FAIL  src/test/models/title.test.ts > Title Model > Updates > should update commercial fields
PrismaClientKnownRequestError: 
Invalid `prisma.title.deleteMany()` invocation:


Foreign key constraint violated on the constraint: `stock_movements_title_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ Module.cleanDatabase src/test/utils/test-db.ts:33:3
     31|   
     32|   // 6. Delete titles (references series)
     33|   await testDb.title.deleteMany()
       |   ^
     34|   
     35|   // 7. Delete independent tables
 â¯ src/test/models/title.test.ts:7:5

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[85/189]âŽ¯

 FAIL  src/test/models/title.test.ts > Title Model > Validation > should validate decimal precision for financial fields
AssertionError: expected 999999.99 to deeply equal 999999.99

Compared values have no visual difference.

 â¯ src/test/models/title.test.ts:177:25
    175|       })
    176| 
    177|       expect(title.rrp).toEqual(new Decimal('999999.99'))
       |                         ^
    178|       expect(title.unitCost).toEqual(new Decimal('999999.99'))
    179|       expect(title.tradeDiscount).toEqual(new Decimal('999.99'))

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[86/189]âŽ¯

 FAIL  src/test/models/title.test.ts > Title Model > Relationships > should handle series deletion impact
AssertionError: promise resolved "{ id: 23, â€¦(4) }" instead of rejecting

- Expected
+ Received

- [Error: rejected promise]
+ Object {
+   "createdAt": 2025-11-01T23:38:32.965Z,
+   "description": "A test series for unit testing",
+   "id": 23,
+   "name": "Deletable Series",
+   "updatedAt": 2025-11-01T23:38:32.965Z,
+ }

 â¯ src/test/models/title.test.ts:249:7
    247|       await expect(
    248|         testDb.series.delete({ where: { id: series.id } })
    249|       ).rejects.toThrow()
       |       ^
    250|     })
    251|   })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[87/189]âŽ¯

 FAIL  src/test/models/title.test.ts > Title Model > Queries > should search titles by various fields
AssertionError: expected [] to have a length of 1 but got +0

- Expected
+ Received

- 1
+ 0

 â¯ src/test/models/title.test.ts:298:27
    296|         where: { publisher: 'Search Publisher' }
    297|       })
    298|       expect(byPublisher).toHaveLength(1)
       |                           ^
    299|     })
    300| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[88/189]âŽ¯

 FAIL  src/test/models/user-role.test.ts > UserRole Model > Creation > should create user role with required fields only
PrismaClientKnownRequestError: 
Invalid `prisma.userRole.create()` invocation:


Foreign key constraint violated on the constraint: `user_roles_user_id_fkey`
 â¯ ei.handleRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:228:13
 â¯ ei.handleAndLogRequestError node_modules/@prisma/client/src/runtime/RequestHandler.ts:174:12
 â¯ ei.request node_modules/@prisma/client/src/runtime/RequestHandler.ts:143:12
 â¯ a node_modules/@prisma/client/src/runtime/getPrismaClient.ts:833:24
 â¯ src/test/models/user-role.test.ts:34:24
     32|       }
     33| 
     34|       const userRole = await testDb.userRole.create({
       |                        ^
     35|         data: userRoleData
     36|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[89/189]âŽ¯

 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with null/undefined user ID
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with empty string user ID
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with malformed user objects
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Token Manipulation Attempts > should reject requests with SQL injection in user ID
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Role Manipulation Attempts > should reject requests attempting to inject admin role
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Role Manipulation Attempts > should validate role permissions from actual database state
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Role Manipulation Attempts > should prevent privilege escalation through role array manipulation
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Permission Bypass Attempts > should reject requests with missing permission checks
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Permission Bypass Attempts > should prevent wildcard permission exploitation
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Permission Bypass Attempts > should validate permission string format
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Session Manipulation Attempts > should reject expired or invalid sessions
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Session Manipulation Attempts > should reject requests with tampered session data
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Session Manipulation Attempts > should handle concurrent session validation correctly
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Injection Attacks > should prevent NoSQL injection in user lookups
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Injection Attacks > should sanitize special characters in user IDs
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Authorization Boundary Tests > should prevent horizontal privilege escalation
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Authorization Boundary Tests > should prevent vertical privilege escalation
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Edge Cases and Race Conditions > should handle rapid role changes safely
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > Edge Cases and Race Conditions > should handle database connection failures gracefully
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > skipAuth Security > should properly isolate public routes from auth requirements
 FAIL  src/test/security/authentication-bypass.test.ts > Authentication Bypass Security Tests > skipAuth Security > should not allow skipAuth to bypass permission checks
TypeError: roleService.create is not a function
 â¯ src/test/security/authentication-bypass.test.ts:28:38
     26| 
     27|     // Create test role
     28|     readOnlyRole = await roleService.create({
       |                                      ^
     29|       name: 'read_only_user',
     30|       description: 'Read Only User',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[90/189]âŽ¯

 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > XSS (Cross-Site Scripting) Prevention > should sanitize user input in database storage
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > XSS (Cross-Site Scripting) Prevention > should handle XSS in audit log details
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > XSS (Cross-Site Scripting) Prevention > should prevent stored XSS in user profile data
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > SQL Injection Prevention > should prevent SQL injection in user queries
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > SQL Injection Prevention > should prevent SQL injection in user service methods
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > SQL Injection Prevention > should safely handle special SQL characters in user data
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > NoSQL Injection Prevention > should prevent NoSQL injection in JSON fields
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > NoSQL Injection Prevention > should prevent NoSQL injection in audit log details
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Command Injection Prevention > should prevent command injection in user fields
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Path Traversal Prevention > should prevent path traversal in permission resource names
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Path Traversal Prevention > should validate resource names in permission strings
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > CSRF Protection Validation > should verify CSRF token requirements for state-changing operations
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > CSRF Protection Validation > should enforce origin validation for sensitive requests
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Mass Assignment Prevention > should prevent mass assignment of protected fields
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Mass Assignment Prevention > should prevent role permission escalation via mass assignment
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Information Disclosure Prevention > should not expose sensitive data in error messages
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Information Disclosure Prevention > should sanitize stack traces in production mode
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Information Disclosure Prevention > should not leak user enumeration via timing attacks
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Denial of Service (DoS) Prevention > should handle large permission arrays without crashing
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Denial of Service (DoS) Prevention > should handle deeply nested objects in audit logs
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Denial of Service (DoS) Prevention > should handle very long strings in user fields
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Prototype Pollution Prevention > should prevent prototype pollution in user metadata
 FAIL  src/test/security/vulnerability-scanning.test.ts > Vulnerability Scanning Tests > Prototype Pollution Prevention > should prevent prototype pollution in audit log details
TypeError: roleService.create is not a function
 â¯ src/test/security/vulnerability-scanning.test.ts:34:35
     32| 
     33|     // Create test role and user
     34|     adminRole = await roleService.create({
       |                                   ^
     35|       name: 'admin',
     36|       description: 'Administrator',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[91/189]âŽ¯

 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > User Authorization > getUserPermissions > should return user permissions from database roles
 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > User Authorization > getUserPermissions > should return empty array for user with no roles
 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > User Authorization > getUserPermissions > should combine permissions from multiple roles
 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > User Authorization > userHasPermission > should check user permission against database roles
 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > User Authorization > userHasPermission > should return false for non-existent user
 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > User Authorization > userHasPermission > should handle wildcard permissions correctly
TypeError: roleService.create is not a function
 â¯ src/test/services/authorizationService.test.ts:95:37
     93|     beforeEach(async () => {
     94|       // Create test roles
     95|       adminRole = await roleService.create({
       |                                     ^
     96|         name: 'admin',
     97|         description: 'System Administrator',

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[92/189]âŽ¯

 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > Resource-based Authorization > getAccessibleResources > should return resources user can access
Error: Cannot find module '@/lib/clerk'
Require stack:
- /Users/michaelblom/dev/stockly2/src/services/authorizationService.ts
 â¯ AuthorizationService.getAccessibleResources src/services/authorizationService.ts:123:34
    121| 
    122|     // Get role permissions from the ROLE_PERMISSIONS mapping
    123|     const { ROLE_PERMISSIONS } = require('@/lib/clerk')
       |                                  ^
    124|     const rolePermissions = ROLE_PERMISSIONS[role] || []
    125| 
 â¯ src/test/services/authorizationService.test.ts:203:48

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[93/189]âŽ¯

 FAIL  src/test/services/authorizationService.test.ts > Authorization Service > Resource-based Authorization > getAccessibleResources > should return all resources for admin
Error: Cannot find module '@/lib/clerk'
Require stack:
- /Users/michaelblom/dev/stockly2/src/services/authorizationService.ts
 â¯ AuthorizationService.getAccessibleResources src/services/authorizationService.ts:123:34
    121| 
    122|     // Get role permissions from the ROLE_PERMISSIONS mapping
    123|     const { ROLE_PERMISSIONS } = require('@/lib/clerk')
       |                                  ^
    124|     const rolePermissions = ROLE_PERMISSIONS[role] || []
    125| 
 â¯ src/test/services/authorizationService.test.ts:214:48

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[94/189]âŽ¯

 FAIL  src/test/components/titles/title-detail.test.tsx > TitleDetailPage Component > Rendering > should not render inventory section when no inventory
Error: expect(element).not.toBeInTheDocument()

expected document not to contain element, found <h3
  class="text-lg font-medium text-gray-900 mb-4"
>
  Inventory Summary
</h3> instead
 â¯ src/test/components/titles/title-detail.test.tsx:274:59
    272| 
    273|       // Inventory section should not exist when no inventory
    274|       expect(screen.queryByText('Inventory Summary')).not.toBeInTheDocâ€¦
       |                                                           ^
    275|     })
    276| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[95/189]âŽ¯

 FAIL  src/test/components/titles/title-detail.test.tsx > TitleDetailPage Component > Delete Functionality > should display error when delete fails
Error: expect(element).toHaveTextContent()

Expected element to have text content:
  Cannot delete title with existing inventory
Received:
  Delete TitleAre you sure you want to delete "The Opinionated Guide to React"? This action cannot be undone.Warning: This title has 2300 units in inventory and cannot be deleted.

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-gray-500 hover:text-gray-700"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"h-6 w-6"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M15 19l-7-7 7-7"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitle Details[0m
              [36m</h1>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"user-menu"[39m
            [36m>[39m
              [0mUser Menu[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-start"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
                  [36m>[39m
                    [0mThe Opinionated Guide to React[0m
                  [36m</h2>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-xl text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mby [0m
                    [0mSara Drasner[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mISBN: [0m
                    [0m9781234567890[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                  [36m>[39m
                    [0mSeries: [0m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-indigo-600"[39m
                    [36m>[39m
                      [0mOpinionated Guides[0m
                    [36m</span>[39m
                    [0m (Book 1)[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex space-x-2"[39m
                [36m>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                  [36m>[39m
                    [0mEdit[0m
                  [36m</button>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"[39m
                  [36m>[39m
                    [0mDelete[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
              [36m>[39m
                [0mMetadata[0m
              [36m</h3>[39m
              [36m<dl[39m
                [33mclass[39m=[32m"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mPAPERBACK[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mO'Reilly Media[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublication Date[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m1 March 2025[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPage Count[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m350[0m
 ...
 â¯ src/test/components/titles/title-detail.test.tsx:426:24
    424|       await waitFor(() => {
    425|         const dialog = screen.getByText('Delete Title').closest('div')
    426|         expect(dialog).toHaveTextContent('Cannot delete title with exiâ€¦
       |                        ^
    427|       })
    428| 
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:118:16

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[96/189]âŽ¯

 FAIL  src/test/components/titles/title-detail.test.tsx > TitleDetailPage Component > Optional Fields > should display N/A for missing optional fields
AssertionError: expected 0 to be greater than 5
 â¯ src/test/components/titles/title-detail.test.tsx:507:23
    505|       const main = screen.getByRole('main')
    506|       const naCount = (main.textContent?.match(/N\/A/g) || []).length
    507|       expect(naCount).toBeGreaterThan(5)
       |                       ^
    508|     })
    509| 

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[97/189]âŽ¯

 FAIL  src/test/components/titles/title-detail.test.tsx > TitleDetailPage Component > Optional Fields > should not display price history section when empty
Error: expect(element).toHaveTextContent()

Expected element to have text content:
  No price history available
Received:
  Price HistoryEffective FromEffective ToRRPUnit CostTrade DiscountReason1 January 2025CurrentÂ£29.99Â£8.5040.00%Initial price

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow-sm"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"text-gray-500 hover:text-gray-700"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"h-6 w-6"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M15 19l-7-7 7-7"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitle Details[0m
              [36m</h1>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mdata-testid[39m=[32m"user-menu"[39m
            [36m>[39m
              [0mUser Menu[0m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"space-y-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex justify-between items-start"[39m
              [36m>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex-1"[39m
                [36m>[39m
                  [36m<h2[39m
                    [33mclass[39m=[32m"text-3xl font-bold text-gray-900 mb-2"[39m
                  [36m>[39m
                    [0mThe Opinionated Guide to React[0m
                  [36m</h2>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-xl text-gray-700 mb-2"[39m
                  [36m>[39m
                    [0mby [0m
                    [0mSara Drasner[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mISBN: [0m
                    [0m9781234567890[0m
                  [36m</p>[39m
                  [36m<p[39m
                    [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                  [36m>[39m
                    [0mSeries: [0m
                    [36m<span[39m
                      [33mclass[39m=[32m"text-indigo-600"[39m
                    [36m>[39m
                      [0mOpinionated Guides[0m
                    [36m</span>[39m
                    [0m (Book 1)[0m
                  [36m</p>[39m
                [36m</div>[39m
                [36m<div[39m
                  [33mclass[39m=[32m"flex space-x-2"[39m
                [36m>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                  [36m>[39m
                    [0mEdit[0m
                  [36m</button>[39m
                  [36m<button[39m
                    [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"[39m
                  [36m>[39m
                    [0mDelete[0m
                  [36m</button>[39m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
            [36m>[39m
              [36m<h3[39m
                [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
              [36m>[39m
                [0mMetadata[0m
              [36m</h3>[39m
              [36m<dl[39m
                [33mclass[39m=[32m"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"[39m
              [36m>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mPAPERBACK[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mO'Reilly Media[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPublication Date[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m1 March 2025[0m
                  [36m</dd>[39m
                [36m</div>[39m
                [36m<div>[39m
                  [36m<dt[39m
                    [33mclass[39m=[32m"text-sm font-medium text-gray-500"[39m
                  [36m>[39m
                    [0mPage Count[0m
                  [36m</dt>[39m
                  [36m<dd[39m
                    [33mclass[39m=[32m"mt-1 text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m350[0m
 ...
 â¯ src/test/components/titles/title-detail.test.tsx:520:30
    518|       await waitFor(() => {
    519|         const priceSection = screen.getByText('Price History').closestâ€¦
    520|         expect(priceSection).toHaveTextContent('No price history availâ€¦
       |                              ^
    521|       })
    522|     })
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:118:16

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[98/189]âŽ¯

 FAIL  src/test/components/titles/title-form.test.tsx > TitleForm Component > Form Validation > should validate ISBN format
TestingLibraryElementError: Unable to find an element with the text: /Invalid ISBN/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
        [36m>[39m
          [0mCore Information[0m
        [36m</h3>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"isbn"[39m
            [36m>[39m
              [0mISBN [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"isbn"[39m
              [33mname[39m=[32m"isbn"[39m
              [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mISBN must be at least 10 characters[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
            [36m>[39m
              [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"title"[39m
            [36m>[39m
              [0mTitle [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"title"[39m
              [33mname[39m=[32m"title"[39m
              [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mTitle is required[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"author"[39m
            [36m>[39m
              [0mAuthor [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"author"[39m
              [33mname[39m=[32m"author"[39m
              [33mplaceholder[39m=[32m"Sara Drasner"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mAuthor is required[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"format"[39m
            [36m>[39m
              [0mFormat [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<select[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"format"[39m
              [33mname[39m=[32m"format"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"PAPERBACK"[39m
              [36m>[39m
                [0mPaperback[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HARDCOVER"[39m
              [36m>[39m
                [0mHardcover[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DIGITAL"[39m
              [36m>[39m
                [0mDigital[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"AUDIOBOOK"[39m
              [36m>[39m
                [0mAudiobook[0m
              [36m</option>[39m
            [36m</select>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publisher"[39m
            [36m>[39m
              [0mPublisher[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publisher"[39m
              [33mname[39m=[32m"publisher"[39m
              [33mplaceholder[39m=[32m"O'Reilly Media"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publicationDate"[39m
            [36m>[39m
              [0mPublication Date[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publicationDate"[39m
              [33mname[39m=[32m"publicationDate"[39m
        ...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mISBN must be at least 10 characters[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mTitle is required[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mAuthor is required[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Da...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/test/components/titles/title-form.test.tsx:154:13
    152|       fireEvent.click(submitButton)
    153| 
    154|       await waitFor(() => {
       |             ^
    155|         expect(screen.getByText(/Invalid ISBN/i)).toBeInTheDocument()
    156|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[99/189]âŽ¯

 FAIL  src/test/components/titles/title-form.test.tsx > TitleForm Component > Form Submission > should submit form with valid data in create mode
AssertionError: expected "spy" to be called with arguments: [ '/api/titles', ObjectContaining{â€¦} ]

Received: 



Number of calls: 0


Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mInvalid ISBN format or checksum[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Date[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publicationDate"[39m
                [33mname[39m=[32m"publicationDate"[39m
                [3...
 â¯ src/test/components/titles/title-form.test.tsx:218:30
    216| 
    217|       await waitFor(() => {
    218|         expect(global.fetch).toHaveBeenCalledWith(
       |                              ^
    219|           '/api/titles',
    220|           expect.objectContaining({
 â¯ runWithExpensiveErrorDiagnosticsDisabled node_modules/@testing-library/dom/dist/config.js:47:12
 â¯ checkCallback node_modules/@testing-library/dom/dist/wait-for.js:124:77
 â¯ Timeout.checkRealTimersCallback node_modules/@testing-library/dom/dist/wait-for.js:118:16

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[100/189]âŽ¯

 FAIL  src/test/components/titles/title-form.test.tsx > TitleForm Component > Form Submission > should display loading state during submission
TestingLibraryElementError: Unable to find an element with the text: /Creating.../i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
        [36m>[39m
          [0mCore Information[0m
        [36m</h3>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"isbn"[39m
            [36m>[39m
              [0mISBN [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"isbn"[39m
              [33mname[39m=[32m"isbn"[39m
              [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid ISBN format or checksum[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
            [36m>[39m
              [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"title"[39m
            [36m>[39m
              [0mTitle [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"title"[39m
              [33mname[39m=[32m"title"[39m
              [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"author"[39m
            [36m>[39m
              [0mAuthor [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"author"[39m
              [33mname[39m=[32m"author"[39m
              [33mplaceholder[39m=[32m"Sara Drasner"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"format"[39m
            [36m>[39m
              [0mFormat [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<select[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"format"[39m
              [33mname[39m=[32m"format"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"PAPERBACK"[39m
              [36m>[39m
                [0mPaperback[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HARDCOVER"[39m
              [36m>[39m
                [0mHardcover[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DIGITAL"[39m
              [36m>[39m
                [0mDigital[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"AUDIOBOOK"[39m
              [36m>[39m
                [0mAudiobook[0m
              [36m</option>[39m
            [36m</select>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publisher"[39m
            [36m>[39m
              [0mPublisher[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publisher"[39m
              [33mname[39m=[32m"publisher"[39m
              [33mplaceholder[39m=[32m"O'Reilly Media"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publicationDate"[39m
            [36m>[39m
              [0mPublication Date[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publicationDate"[39m
              [33mname[39m=[32m"publicationDate"[39m
              [33mtype[39m=[32m"date"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid date[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mInvalid ISBN format or checksum[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Date[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publicationDate"[39m
                [33mname[39m=[32m"publicationDate"[39m
                [3...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/test/components/titles/title-form.test.tsx:249:13
    247|       fireEvent.click(submitButton)
    248| 
    249|       await waitFor(() => {
       |             ^
    250|         expect(screen.getByText(/Creating.../i)).toBeInTheDocument()
    251|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[101/189]âŽ¯

 FAIL  src/test/components/titles/title-form.test.tsx > TitleForm Component > Form Submission > should display API error on failed submission
TestingLibraryElementError: Unable to find an element with the text: /Duplicate ISBN/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<form[39m
      [33mclass[39m=[32m"space-y-8"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
      [36m>[39m
        [36m<h3[39m
          [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
        [36m>[39m
          [0mCore Information[0m
        [36m</h3>[39m
        [36m<div[39m
          [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"isbn"[39m
            [36m>[39m
              [0mISBN [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
              [33mid[39m=[32m"isbn"[39m
              [33mname[39m=[32m"isbn"[39m
              [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid ISBN format or checksum[0m
            [36m</p>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
            [36m>[39m
              [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"sm:col-span-2"[39m
          [36m>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"title"[39m
            [36m>[39m
              [0mTitle [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"title"[39m
              [33mname[39m=[32m"title"[39m
              [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"author"[39m
            [36m>[39m
              [0mAuthor [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"author"[39m
              [33mname[39m=[32m"author"[39m
              [33mplaceholder[39m=[32m"Sara Drasner"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"format"[39m
            [36m>[39m
              [0mFormat [0m
              [36m<span[39m
                [33mclass[39m=[32m"text-red-500"[39m
              [36m>[39m
                [0m*[0m
              [36m</span>[39m
            [36m</label>[39m
            [36m<select[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
              [33mid[39m=[32m"format"[39m
              [33mname[39m=[32m"format"[39m
            [36m>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"PAPERBACK"[39m
              [36m>[39m
                [0mPaperback[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"HARDCOVER"[39m
              [36m>[39m
                [0mHardcover[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"DIGITAL"[39m
              [36m>[39m
                [0mDigital[0m
              [36m</option>[39m
              [36m<option[39m
                [33mvalue[39m=[32m"AUDIOBOOK"[39m
              [36m>[39m
                [0mAudiobook[0m
              [36m</option>[39m
            [36m</select>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publisher"[39m
            [36m>[39m
              [0mPublisher[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publisher"[39m
              [33mname[39m=[32m"publisher"[39m
              [33mplaceholder[39m=[32m"O'Reilly Media"[39m
              [33mtype[39m=[32m"text"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
              [33mfor[39m=[32m"publicationDate"[39m
            [36m>[39m
              [0mPublication Date[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
              [33mid[39m=[32m"publicationDate"[39m
              [33mname[39m=[32m"publicationDate"[39m
              [33mtype[39m=[32m"date"[39m
            [36m/>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
            [36m>[39m
              [0mInvalid date[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m...

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<form[39m
        [33mclass[39m=[32m"space-y-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<h3[39m
            [33mclass[39m=[32m"text-lg font-medium text-gray-900 mb-4"[39m
          [36m>[39m
            [0mCore Information[0m
          [36m</h3>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-6 sm:grid-cols-2"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"isbn"[39m
              [36m>[39m
                [0mISBN [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-red-300 focus:ring-red-500 focus:border-red-500"[39m
                [33mid[39m=[32m"isbn"[39m
                [33mname[39m=[32m"isbn"[39m
                [33mplaceholder[39m=[32m"978-1-234567-89-0"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-red-600"[39m
              [36m>[39m
                [0mInvalid ISBN format or checksum[0m
              [36m</p>[39m
              [36m<p[39m
                [33mclass[39m=[32m"mt-1 text-sm text-gray-500"[39m
              [36m>[39m
                [0mEnter ISBN-10 or ISBN-13 with or without hyphens[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"sm:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"title"[39m
              [36m>[39m
                [0mTitle [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"title"[39m
                [33mname[39m=[32m"title"[39m
                [33mplaceholder[39m=[32m"The Opinionated Guide to React"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"author"[39m
              [36m>[39m
                [0mAuthor [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"author"[39m
                [33mname[39m=[32m"author"[39m
                [33mplaceholder[39m=[32m"Sara Drasner"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat [0m
                [36m<span[39m
                  [33mclass[39m=[32m"text-red-500"[39m
                [36m>[39m
                  [0m*[0m
                [36m</span>[39m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md shadow-sm sm:text-sm px-3 py-2 border border-gray-300 focus:ring-indigo-500 focus:border-indigo-500"[39m
                [33mid[39m=[32m"format"[39m
                [33mname[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mname[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"O'Reilly Media"[39m
                [33mtype[39m=[32m"text"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700"[39m
                [33mfor[39m=[32m"publicationDate"[39m
              [36m>[39m
                [0mPublication Date[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publicationDate"[39m
                [33mname[39m=[32m"publicationDate"[39m
                [3...
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/test/components/titles/title-form.test.tsx:272:13
    270|       fireEvent.click(submitButton)
    271| 
    272|       await waitFor(() => {
       |             ^
    273|         expect(screen.getByText(/Duplicate ISBN/i)).toBeInTheDocument()
    274|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[102/189]âŽ¯

 FAIL  src/test/components/titles/title-list.test.tsx > TitlesPage Component > Empty State > should display empty state when no titles found
TestingLibraryElementError: Unable to find an element with the text: No titles found. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<header[39m
        [33mclass[39m=[32m"bg-white shadow"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitles[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
              [36m>[39m
                [0mManage your book catalog[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mImport Titles[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 4v16m8-8H4"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mCreate Title[0m
              [36m</button>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"user-menu"[39m
              [36m>[39m
                [0mUser Menu[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</header>[39m
      [36m<main[39m
        [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"lg:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"search"[39m
              [36m>[39m
                [0mSearch[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"search"[39m
                [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m""[39m
                [36m>[39m
                  [0mAll Formats[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"category"[39m
              [36m>[39m
                [0mCategory[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"category"[39m
                [33mplaceholder[39m=[32m"All categories"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"All publishers"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-gray-700"[39m
          [36m>[39m
            [0mShowing [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m of[0m
            [0m [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m titles[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"overflow-x-auto"[39m
          [36m>[39m
            [36m<table[39m
              [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
            [36m>[39m
              [36m<thead[39m
                [33mclass[39m=[32m"bg-gray-50"[39m
              [36m>[39m
                [36m<tr>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mTitle[0m
                      [36m<svg[39m
                        [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                        [33mfill[39m=[32m"currentColor"[39m
                        [33mviewBox[39m=[32m"0 0 20 20"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33mclip-rule[39m=[32m"evenodd"[39m
                          [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                          [33mfill-rule[39m=[32m"evenodd"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mAuthor[0m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mISBN[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mRRP[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"relative px-6 py-3"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"sr-only"[39m
                    [36m>[39m
                      [0mActions[0m
                    [36m</span>[39m
                  [36m</th>[39m
                [36m</tr>[39m
              [36m</thead>[39m
              [36m<tbody[39m
                [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book One[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Series[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJohn Doe[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9781234567890[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mPaperback[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m29.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mTest Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book Two[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJane Smith[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9789876543210[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mHardcover[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m39.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mAnother Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
              [36m</tbody>[39m
            [36m</table>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</main>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mTitles[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                [36m>[39m
                  [0mManage your book catalog[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mImport Titles[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M12 4v16m8-8H4"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCreate Title[0m
                [36m</button>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"user-menu"[39m
                [36m>[39m
                  [0mUser Menu[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"search"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"search"[39m
                  [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"format"[39m
                [36m>[39m
                  [0mFormat[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"format"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m""[39m
                  [36m>[39m
                    [0mAll Formats[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"HARDCOVER"[39m
                  [36m>[39m
                    [0mHardcover[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"PAPERBACK"[39m
                  [36m>[39m
                    [0mPaperback[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"DIGITAL"[39m
                  [36m>[39m
                    [0mDigital[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"AUDIOBOOK"[39m
                  [36m>[39m
                    [0mAudiobook[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"category"[39m
                [36m>[39m
                  [0mCategory[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"category"[39m
                  [33mplaceholder[39m=[32m"All categories"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"publisher"[39m
                [36m>[39m
                  [0mPublisher[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"publisher"[39m
                  [33mplaceholder[39m=[32m"All publishers"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-700"[39m
            [36m>[39m
              [0mShowing [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m of[0m
              [0m [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m titles[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<thead[39m
                  [33mclass[39m=[32m"bg-gray-50"[39m
                [36m>[39m
                  [36m<tr>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mTitle[0m
                        [36m<svg[39m
                          [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                          [33mfill[39m=[32m"currentColor"[39m
                          [33mviewBox[39m=[32m"0 0 20 20"[39m
                        [36m>[39m
                          [36m<path[39m
                            [33mclip-rule[39m=[32m"evenodd"[39m
                            [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                            [33mfill-rule[39m=[32m"evenodd"[39m
                          [36m/>[39m
                        [36m</svg>[39m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mAuthor[0m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mISBN[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mFormat[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mRRP[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mPublisher[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"relative px-6 py-3"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"sr-only"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</span>[39m
                    [36m</th>[39m
                  [36m</tr>[39m
                [36m</thead>[39m
                [36m<tbody[39m
                  [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book One[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mTest Series[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJohn Doe[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9781234567890[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mPaperback[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m29.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book Two[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJane Smith[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9789876543210[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mHardcover[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m39.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mAnother Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                [36m</tbody>[39m
              [36m</table>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/test/components/titles/title-list.test.tsx:208:13
    206|       render(<TitlesPage />)
    207| 
    208|       await waitFor(() => {
       |             ^
    209|         expect(screen.getByText('No titles found')).toBeInTheDocument()
    210|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[103/189]âŽ¯

 FAIL  src/test/components/titles/title-list.test.tsx > TitlesPage Component > Error Handling > should display error message when fetch fails
TestingLibraryElementError: Unable to find an element with the text: Error loading titles. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<header[39m
        [33mclass[39m=[32m"bg-white shadow"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitles[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
              [36m>[39m
                [0mManage your book catalog[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mImport Titles[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 4v16m8-8H4"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mCreate Title[0m
              [36m</button>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"user-menu"[39m
              [36m>[39m
                [0mUser Menu[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</header>[39m
      [36m<main[39m
        [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"lg:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"search"[39m
              [36m>[39m
                [0mSearch[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"search"[39m
                [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m""[39m
                [36m>[39m
                  [0mAll Formats[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"category"[39m
              [36m>[39m
                [0mCategory[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"category"[39m
                [33mplaceholder[39m=[32m"All categories"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"All publishers"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-gray-700"[39m
          [36m>[39m
            [0mShowing [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m of[0m
            [0m [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m titles[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"overflow-x-auto"[39m
          [36m>[39m
            [36m<table[39m
              [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
            [36m>[39m
              [36m<thead[39m
                [33mclass[39m=[32m"bg-gray-50"[39m
              [36m>[39m
                [36m<tr>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mTitle[0m
                      [36m<svg[39m
                        [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                        [33mfill[39m=[32m"currentColor"[39m
                        [33mviewBox[39m=[32m"0 0 20 20"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33mclip-rule[39m=[32m"evenodd"[39m
                          [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                          [33mfill-rule[39m=[32m"evenodd"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mAuthor[0m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mISBN[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mRRP[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"relative px-6 py-3"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"sr-only"[39m
                    [36m>[39m
                      [0mActions[0m
                    [36m</span>[39m
                  [36m</th>[39m
                [36m</tr>[39m
              [36m</thead>[39m
              [36m<tbody[39m
                [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book One[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Series[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJohn Doe[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9781234567890[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mPaperback[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m29.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mTest Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book Two[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJane Smith[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9789876543210[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mHardcover[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m39.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mAnother Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
              [36m</tbody>[39m
            [36m</table>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</main>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mTitles[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                [36m>[39m
                  [0mManage your book catalog[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mImport Titles[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M12 4v16m8-8H4"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCreate Title[0m
                [36m</button>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"user-menu"[39m
                [36m>[39m
                  [0mUser Menu[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"search"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"search"[39m
                  [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"format"[39m
                [36m>[39m
                  [0mFormat[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"format"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m""[39m
                  [36m>[39m
                    [0mAll Formats[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"HARDCOVER"[39m
                  [36m>[39m
                    [0mHardcover[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"PAPERBACK"[39m
                  [36m>[39m
                    [0mPaperback[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"DIGITAL"[39m
                  [36m>[39m
                    [0mDigital[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"AUDIOBOOK"[39m
                  [36m>[39m
                    [0mAudiobook[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"category"[39m
                [36m>[39m
                  [0mCategory[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"category"[39m
                  [33mplaceholder[39m=[32m"All categories"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"publisher"[39m
                [36m>[39m
                  [0mPublisher[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"publisher"[39m
                  [33mplaceholder[39m=[32m"All publishers"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-700"[39m
            [36m>[39m
              [0mShowing [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m of[0m
              [0m [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m titles[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<thead[39m
                  [33mclass[39m=[32m"bg-gray-50"[39m
                [36m>[39m
                  [36m<tr>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mTitle[0m
                        [36m<svg[39m
                          [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                          [33mfill[39m=[32m"currentColor"[39m
                          [33mviewBox[39m=[32m"0 0 20 20"[39m
                        [36m>[39m
                          [36m<path[39m
                            [33mclip-rule[39m=[32m"evenodd"[39m
                            [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                            [33mfill-rule[39m=[32m"evenodd"[39m
                          [36m/>[39m
                        [36m</svg>[39m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mAuthor[0m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mISBN[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mFormat[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mRRP[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mPublisher[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"relative px-6 py-3"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"sr-only"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</span>[39m
                    [36m</th>[39m
                  [36m</tr>[39m
                [36m</thead>[39m
                [36m<tbody[39m
                  [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book One[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mTest Series[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJohn Doe[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9781234567890[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mPaperback[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m29.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book Two[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJane Smith[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9789876543210[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mHardcover[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m39.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mAnother Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                [36m</tbody>[39m
              [36m</table>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/test/components/titles/title-list.test.tsx:253:13
    251|       render(<TitlesPage />)
    252| 
    253|       await waitFor(() => {
       |             ^
    254|         expect(screen.getByText('Error loading titles')).toBeInTheDocuâ€¦
    255|       })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[104/189]âŽ¯

 FAIL  src/test/components/titles/title-list.test.tsx > TitlesPage Component > Pagination > should display pagination when multiple pages exist
TestingLibraryElementError: Unable to find an element with the text: /Page.*1.*of.*3/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
    [36m>[39m
      [36m<header[39m
        [33mclass[39m=[32m"bg-white shadow"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex justify-between items-center"[39m
          [36m>[39m
            [36m<div>[39m
              [36m<h1[39m
                [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
              [36m>[39m
                [0mTitles[0m
              [36m</h1>[39m
              [36m<p[39m
                [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
              [36m>[39m
                [0mManage your book catalog[0m
              [36m</p>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-center space-x-4"[39m
            [36m>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mImport Titles[0m
              [36m</button>[39m
              [36m<button[39m
                [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M12 4v16m8-8H4"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
                [0mCreate Title[0m
              [36m</button>[39m
              [36m<div[39m
                [33mdata-testid[39m=[32m"user-menu"[39m
              [36m>[39m
                [0mUser Menu[0m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</header>[39m
      [36m<main[39m
        [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"lg:col-span-2"[39m
            [36m>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"search"[39m
              [36m>[39m
                [0mSearch[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"search"[39m
                [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"format"[39m
              [36m>[39m
                [0mFormat[0m
              [36m</label>[39m
              [36m<select[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"format"[39m
              [36m>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m""[39m
                [36m>[39m
                  [0mAll Formats[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"HARDCOVER"[39m
                [36m>[39m
                  [0mHardcover[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"PAPERBACK"[39m
                [36m>[39m
                  [0mPaperback[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"DIGITAL"[39m
                [36m>[39m
                  [0mDigital[0m
                [36m</option>[39m
                [36m<option[39m
                  [33mvalue[39m=[32m"AUDIOBOOK"[39m
                [36m>[39m
                  [0mAudiobook[0m
                [36m</option>[39m
              [36m</select>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"category"[39m
              [36m>[39m
                [0mCategory[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"category"[39m
                [33mplaceholder[39m=[32m"All categories"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                [33mfor[39m=[32m"publisher"[39m
              [36m>[39m
                [0mPublisher[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                [33mid[39m=[32m"publisher"[39m
                [33mplaceholder[39m=[32m"All publishers"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m""[39m
              [36m/>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-gray-700"[39m
          [36m>[39m
            [0mShowing [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m of[0m
            [0m [0m
            [36m<span[39m
              [33mclass[39m=[32m"font-medium"[39m
            [36m>[39m
              [0m2[0m
            [36m</span>[39m
            [0m titles[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<div[39m
          [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"overflow-x-auto"[39m
          [36m>[39m
            [36m<table[39m
              [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
            [36m>[39m
              [36m<thead[39m
                [33mclass[39m=[32m"bg-gray-50"[39m
              [36m>[39m
                [36m<tr>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mTitle[0m
                      [36m<svg[39m
                        [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                        [33mfill[39m=[32m"currentColor"[39m
                        [33mviewBox[39m=[32m"0 0 20 20"[39m
                      [36m>[39m
                        [36m<path[39m
                          [33mclip-rule[39m=[32m"evenodd"[39m
                          [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                          [33mfill-rule[39m=[32m"evenodd"[39m
                        [36m/>[39m
                      [36m</svg>[39m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"flex items-center"[39m
                    [36m>[39m
                      [0mAuthor[0m
                    [36m</div>[39m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mISBN[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mFormat[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mRRP[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [0mPublisher[0m
                  [36m</th>[39m
                  [36m<th[39m
                    [33mclass[39m=[32m"relative px-6 py-3"[39m
                    [33mscope[39m=[32m"col"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"sr-only"[39m
                    [36m>[39m
                      [0mActions[0m
                    [36m</span>[39m
                  [36m</th>[39m
                [36m</tr>[39m
              [36m</thead>[39m
              [36m<tbody[39m
                [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book One[0m
                    [36m</div>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Series[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJohn Doe[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9781234567890[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mPaperback[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m29.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mTest Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
                [36m<tr[39m
                  [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                [36m>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4"[39m
                  [36m>[39m
                    [36m<div[39m
                      [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                    [36m>[39m
                      [0mTest Book Two[0m
                    [36m</div>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0mJane Smith[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                  [36m>[39m
                    [0m9789876543210[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                  [36m>[39m
                    [36m<span[39m
                      [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                    [36m>[39m
                      [0mHardcover[0m
                    [36m</span>[39m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                  [36m>[39m
                    [0m$[0m
                    [0m39.99[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                  [36m>[39m
                    [0mAnother Publisher[0m
                  [36m</td>[39m
                  [36m<td[39m
                    [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                  [36m>[39m
                    [36m<button[39m
                      [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                    [36m>[39m
                      [0mView[0m
                    [36m</button>[39m
                  [36m</td>[39m
                [36m</tr>[39m
              [36m</tbody>[39m
            [36m</table>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</main>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen bg-gray-50"[39m
      [36m>[39m
        [36m<header[39m
          [33mclass[39m=[32m"bg-white shadow"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex justify-between items-center"[39m
            [36m>[39m
              [36m<div>[39m
                [36m<h1[39m
                  [33mclass[39m=[32m"text-2xl font-bold text-gray-900"[39m
                [36m>[39m
                  [0mTitles[0m
                [36m</h1>[39m
                [36m<p[39m
                  [33mclass[39m=[32m"text-sm text-gray-500 mt-1"[39m
                [36m>[39m
                  [0mManage your book catalog[0m
                [36m</p>[39m
              [36m</div>[39m
              [36m<div[39m
                [33mclass[39m=[32m"flex items-center space-x-4"[39m
              [36m>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mImport Titles[0m
                [36m</button>[39m
                [36m<button[39m
                  [33mclass[39m=[32m"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"-ml-1 mr-2 h-5 w-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M12 4v16m8-8H4"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                  [0mCreate Title[0m
                [36m</button>[39m
                [36m<div[39m
                  [33mdata-testid[39m=[32m"user-menu"[39m
                [36m>[39m
                  [0mUser Menu[0m
                [36m</div>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</header>[39m
        [36m<main[39m
          [33mclass[39m=[32m"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-6 bg-white shadow rounded-lg p-6"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-5"[39m
            [36m>[39m
              [36m<div[39m
                [33mclass[39m=[32m"lg:col-span-2"[39m
              [36m>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"search"[39m
                [36m>[39m
                  [0mSearch[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"search"[39m
                  [33mplaceholder[39m=[32m"Title, author, or ISBN..."[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"format"[39m
                [36m>[39m
                  [0mFormat[0m
                [36m</label>[39m
                [36m<select[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"format"[39m
                [36m>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m""[39m
                  [36m>[39m
                    [0mAll Formats[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"HARDCOVER"[39m
                  [36m>[39m
                    [0mHardcover[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"PAPERBACK"[39m
                  [36m>[39m
                    [0mPaperback[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"DIGITAL"[39m
                  [36m>[39m
                    [0mDigital[0m
                  [36m</option>[39m
                  [36m<option[39m
                    [33mvalue[39m=[32m"AUDIOBOOK"[39m
                  [36m>[39m
                    [0mAudiobook[0m
                  [36m</option>[39m
                [36m</select>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"category"[39m
                [36m>[39m
                  [0mCategory[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"category"[39m
                  [33mplaceholder[39m=[32m"All categories"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
              [36m<div>[39m
                [36m<label[39m
                  [33mclass[39m=[32m"block text-sm font-medium text-gray-700 mb-1"[39m
                  [33mfor[39m=[32m"publisher"[39m
                [36m>[39m
                  [0mPublisher[0m
                [36m</label>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm px-3 py-2 border"[39m
                  [33mid[39m=[32m"publisher"[39m
                  [33mplaceholder[39m=[32m"All publishers"[39m
                  [33mtype[39m=[32m"text"[39m
                  [33mvalue[39m=[32m""[39m
                [36m/>[39m
              [36m</div>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"mb-4 flex justify-between items-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-gray-700"[39m
            [36m>[39m
              [0mShowing [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m of[0m
              [0m [0m
              [36m<span[39m
                [33mclass[39m=[32m"font-medium"[39m
              [36m>[39m
                [0m2[0m
              [36m</span>[39m
              [0m titles[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"bg-white shadow overflow-hidden sm:rounded-lg"[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"overflow-x-auto"[39m
            [36m>[39m
              [36m<table[39m
                [33mclass[39m=[32m"min-w-full divide-y divide-gray-200"[39m
              [36m>[39m
                [36m<thead[39m
                  [33mclass[39m=[32m"bg-gray-50"[39m
                [36m>[39m
                  [36m<tr>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mTitle[0m
                        [36m<svg[39m
                          [33mclass[39m=[32m"ml-1 h-4 w-4 "[39m
                          [33mfill[39m=[32m"currentColor"[39m
                          [33mviewBox[39m=[32m"0 0 20 20"[39m
                        [36m>[39m
                          [36m<path[39m
                            [33mclip-rule[39m=[32m"evenodd"[39m
                            [33md[39m=[32m"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"[39m
                            [33mfill-rule[39m=[32m"evenodd"[39m
                          [36m/>[39m
                        [36m</svg>[39m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"flex items-center"[39m
                      [36m>[39m
                        [0mAuthor[0m
                      [36m</div>[39m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mISBN[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mFormat[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mRRP[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [0mPublisher[0m
                    [36m</th>[39m
                    [36m<th[39m
                      [33mclass[39m=[32m"relative px-6 py-3"[39m
                      [33mscope[39m=[32m"col"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"sr-only"[39m
                      [36m>[39m
                        [0mActions[0m
                      [36m</span>[39m
                    [36m</th>[39m
                  [36m</tr>[39m
                [36m</thead>[39m
                [36m<tbody[39m
                  [33mclass[39m=[32m"bg-white divide-y divide-gray-200"[39m
                [36m>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book One[0m
                      [36m</div>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm text-gray-500"[39m
                      [36m>[39m
                        [0mTest Series[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJohn Doe[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9781234567890[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mPaperback[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m29.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mTest Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                  [36m<tr[39m
                    [33mclass[39m=[32m"hover:bg-gray-50 cursor-pointer"[39m
                  [36m>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4"[39m
                    [36m>[39m
                      [36m<div[39m
                        [33mclass[39m=[32m"text-sm font-medium text-gray-900"[39m
                      [36m>[39m
                        [0mTest Book Two[0m
                      [36m</div>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0mJane Smith[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500 font-mono"[39m
                    [36m>[39m
                      [0m9789876543210[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap"[39m
                    [36m>[39m
                      [36m<span[39m
                        [33mclass[39m=[32m"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"[39m
                      [36m>[39m
                        [0mHardcover[0m
                      [36m</span>[39m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-900"[39m
                    [36m>[39m
                      [0m$[0m
                      [0m39.99[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-sm text-gray-500"[39m
                    [36m>[39m
                      [0mAnother Publisher[0m
                    [36m</td>[39m
                    [36m<td[39m
                      [33mclass[39m=[32m"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"[39m
                    [36m>[39m
                      [36m<button[39m
                        [33mclass[39m=[32m"text-indigo-600 hover:text-indigo-900"[39m
                      [36m>[39m
                        [0mView[0m
                      [36m</button>[39m
                    [36m</td>[39m
                  [36m</tr>[39m
                [36m</tbody>[39m
              [36m</table>[39m
            [36m</div>[39m
          [36m</div>[39m
        [36m</main>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
 â¯ Proxy.waitForWrapper node_modules/@testing-library/dom/dist/wait-for.js:163:27
 â¯ src/test/components/titles/title-list.test.tsx:385:13
    383|       render(<TitlesPage />)
    384| 
    385|       await waitFor(() => {
       |             ^
    386|         expect(screen.getByText(/Page.*1.*of.*3/)).toBeInTheDocument()
    387|       }, { timeout: 3000 })

âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[105/189]âŽ¯

 Test Files  29 failed | 21 passed (50)
      Tests  182 failed | 732 passed | 65 skipped (979)
   Start at  23:38:28
   Duration  13.76s (transform 932ms, setup 2.22s, collect 3.17s, tests 20.44s, environment 13.24s, prepare 2.21s)

 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
